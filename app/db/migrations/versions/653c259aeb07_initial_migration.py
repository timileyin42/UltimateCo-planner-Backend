"""Initial migration

Revision ID: 653c259aeb07
Revises: 
Create Date: 2025-12-08 08:51:06.637338

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '653c259aeb07'
down_revision = None
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('stripe_event_logs',
    sa.Column('event_id', sa.String(length=100), nullable=False),
    sa.Column('event_type', sa.String(length=100), nullable=True),
    sa.Column('processing_status', sa.String(length=50), nullable=False),
    sa.Column('event_metadata', sa.Text(), nullable=True),
    sa.Column('processed_at', sa.DateTime(), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_stripe_event_id', 'stripe_event_logs', ['event_id'], unique=False)
    op.create_index('idx_stripe_event_type', 'stripe_event_logs', ['event_type'], unique=False)
    op.create_index('idx_stripe_processed_at', 'stripe_event_logs', ['processed_at'], unique=False)
    op.create_index('idx_stripe_processing_status', 'stripe_event_logs', ['processing_status'], unique=False)
    op.create_index(op.f('ix_stripe_event_logs_event_id'), 'stripe_event_logs', ['event_id'], unique=True)
    op.create_index(op.f('ix_stripe_event_logs_id'), 'stripe_event_logs', ['id'], unique=False)
    op.create_table('subscription_plans',
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('plan_type', sa.Enum('FREE', 'PRO', 'ENTERPRISE', name='plantype'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('price_monthly', sa.Float(), nullable=False),
    sa.Column('price_yearly', sa.Float(), nullable=False),
    sa.Column('max_events', sa.Integer(), nullable=True),
    sa.Column('max_attendees_per_event', sa.Integer(), nullable=True),
    sa.Column('max_storage_gb', sa.Float(), nullable=True),
    sa.Column('ai_suggestions', sa.Boolean(), nullable=False),
    sa.Column('advanced_analytics', sa.Boolean(), nullable=False),
    sa.Column('custom_branding', sa.Boolean(), nullable=False),
    sa.Column('priority_support', sa.Boolean(), nullable=False),
    sa.Column('api_access', sa.Boolean(), nullable=False),
    sa.Column('stripe_price_id_monthly', sa.String(length=100), nullable=True),
    sa.Column('stripe_price_id_yearly', sa.String(length=100), nullable=True),
    sa.Column('stripe_product_id', sa.String(length=100), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('name')
    )
    op.create_index('idx_plan_active', 'subscription_plans', ['is_active'], unique=False)
    op.create_index('idx_plan_type', 'subscription_plans', ['plan_type'], unique=False)
    op.create_index('idx_stripe_price_monthly', 'subscription_plans', ['stripe_price_id_monthly'], unique=False)
    op.create_index('idx_stripe_price_yearly', 'subscription_plans', ['stripe_price_id_yearly'], unique=False)
    op.create_index(op.f('ix_subscription_plans_id'), 'subscription_plans', ['id'], unique=False)
    op.create_table('users',
    sa.Column('email', sa.String(length=255), nullable=False),
    sa.Column('hashed_password', sa.String(length=255), nullable=False),
    sa.Column('full_name', sa.String(length=255), nullable=False),
    sa.Column('username', sa.String(length=100), nullable=True),
    sa.Column('signup_method', sa.String(length=10), nullable=False),
    sa.Column('bio', sa.Text(), nullable=True),
    sa.Column('avatar_url', sa.String(length=500), nullable=True),
    sa.Column('phone_number', sa.String(length=20), nullable=True),
    sa.Column('date_of_birth', sa.DateTime(), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('timezone', sa.String(length=50), nullable=True),
    sa.Column('email_notifications', sa.Boolean(), nullable=False),
    sa.Column('push_notifications', sa.Boolean(), nullable=False),
    sa.Column('sms_notifications', sa.Boolean(), nullable=False),
    sa.Column('is_verified', sa.Boolean(), nullable=False),
    sa.Column('is_superuser', sa.Boolean(), nullable=False),
    sa.Column('email_verification_token', sa.String(length=255), nullable=True),
    sa.Column('email_verification_otp', sa.String(length=6), nullable=True),
    sa.Column('otp_expires_at', sa.DateTime(), nullable=True),
    sa.Column('otp_attempts', sa.Integer(), nullable=False),
    sa.Column('password_reset_token', sa.String(length=255), nullable=True),
    sa.Column('password_reset_expires', sa.DateTime(), nullable=True),
    sa.Column('is_public_profile', sa.Boolean(), nullable=False),
    sa.Column('stripe_customer_id', sa.String(length=100), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('stripe_customer_id')
    )
    op.create_index('idx_user_active_verified', 'users', ['is_active', 'is_verified'], unique=False)
    op.create_index('idx_user_city', 'users', ['city'], unique=False)
    op.create_index('idx_user_city_country', 'users', ['city', 'country'], unique=False)
    op.create_index('idx_user_country', 'users', ['country'], unique=False)
    op.create_index('idx_user_created_active', 'users', ['created_at', 'is_active'], unique=False)
    op.create_index('idx_user_created_at', 'users', ['created_at'], unique=False)
    op.create_index('idx_user_email', 'users', ['email'], unique=False)
    op.create_index('idx_user_is_active', 'users', ['is_active'], unique=False)
    op.create_index('idx_user_is_deleted', 'users', ['is_deleted'], unique=False)
    op.create_index('idx_user_is_verified', 'users', ['is_verified'], unique=False)
    op.create_index('idx_user_otp_expires_at', 'users', ['otp_expires_at'], unique=False)
    op.create_index('idx_user_signup_method', 'users', ['signup_method'], unique=False)
    op.create_index('idx_user_stripe_customer_id', 'users', ['stripe_customer_id'], unique=False)
    op.create_index('idx_user_timezone', 'users', ['timezone'], unique=False)
    op.create_index('idx_user_updated_at', 'users', ['updated_at'], unique=False)
    op.create_index('idx_user_username', 'users', ['username'], unique=False)
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
    op.create_index(op.f('ix_users_email_verification_token'), 'users', ['email_verification_token'], unique=False)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_username'), 'users', ['username'], unique=True)
    op.create_table('biometric_auths',
    sa.Column('biometric_type', sa.Enum('FACE_ID', 'FINGERPRINT', 'VOICE', 'IRIS', name='biometrictype'), nullable=False),
    sa.Column('public_key', sa.Text(), nullable=False),
    sa.Column('biometric_template_hash', sa.String(length=255), nullable=True),
    sa.Column('device_id', sa.String(length=255), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'REVOKED', 'EXPIRED', 'SUSPENDED', name='biometricstatus'), nullable=False),
    sa.Column('is_primary', sa.Boolean(), nullable=False),
    sa.Column('requires_passcode_fallback', sa.Boolean(), nullable=False),
    sa.Column('max_failed_attempts', sa.Integer(), nullable=False),
    sa.Column('current_failed_attempts', sa.Integer(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('usage_count', sa.Integer(), nullable=False),
    sa.Column('enrollment_data', sa.Text(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_biometric_auth_created_at', 'biometric_auths', ['created_at'], unique=False)
    op.create_index('idx_biometric_auth_device_id', 'biometric_auths', ['device_id'], unique=False)
    op.create_index('idx_biometric_auth_device_type', 'biometric_auths', ['device_id', 'biometric_type'], unique=False)
    op.create_index('idx_biometric_auth_expires_at', 'biometric_auths', ['expires_at'], unique=False)
    op.create_index('idx_biometric_auth_last_used', 'biometric_auths', ['last_used_at'], unique=False)
    op.create_index('idx_biometric_auth_primary', 'biometric_auths', ['is_primary'], unique=False)
    op.create_index('idx_biometric_auth_status', 'biometric_auths', ['status'], unique=False)
    op.create_index('idx_biometric_auth_type', 'biometric_auths', ['biometric_type'], unique=False)
    op.create_index('idx_biometric_auth_type_status', 'biometric_auths', ['biometric_type', 'status'], unique=False)
    op.create_index('idx_biometric_auth_user_device', 'biometric_auths', ['user_id', 'device_id'], unique=False)
    op.create_index('idx_biometric_auth_user_id', 'biometric_auths', ['user_id'], unique=False)
    op.create_index('idx_biometric_auth_user_primary', 'biometric_auths', ['user_id', 'is_primary'], unique=False)
    op.create_index('idx_biometric_auth_user_status', 'biometric_auths', ['user_id', 'status'], unique=False)
    op.create_index('idx_biometric_auth_user_type', 'biometric_auths', ['user_id', 'biometric_type'], unique=False)
    op.create_index(op.f('ix_biometric_auths_id'), 'biometric_auths', ['id'], unique=False)
    op.create_table('biometric_devices',
    sa.Column('device_name', sa.String(length=255), nullable=False),
    sa.Column('device_type', sa.Enum('IOS', 'ANDROID', 'WEB', 'DESKTOP', name='devicetype'), nullable=False),
    sa.Column('device_id', sa.String(length=255), nullable=False),
    sa.Column('device_model', sa.String(length=100), nullable=True),
    sa.Column('os_version', sa.String(length=50), nullable=True),
    sa.Column('app_version', sa.String(length=50), nullable=True),
    sa.Column('device_fingerprint', sa.Text(), nullable=True),
    sa.Column('is_trusted', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('login_count', sa.Integer(), nullable=False),
    sa.Column('last_known_location', sa.String(length=255), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_user_device_active', 'biometric_devices', ['is_active'], unique=False)
    op.create_index('idx_user_device_created_at', 'biometric_devices', ['created_at'], unique=False)
    op.create_index('idx_user_device_device_id', 'biometric_devices', ['device_id'], unique=False)
    op.create_index('idx_user_device_device_user', 'biometric_devices', ['device_id', 'user_id'], unique=False)
    op.create_index('idx_user_device_last_used', 'biometric_devices', ['last_used_at'], unique=False)
    op.create_index('idx_user_device_trusted', 'biometric_devices', ['is_trusted'], unique=False)
    op.create_index('idx_user_device_type', 'biometric_devices', ['device_type'], unique=False)
    op.create_index('idx_user_device_user_active', 'biometric_devices', ['user_id', 'is_active'], unique=False)
    op.create_index('idx_user_device_user_id', 'biometric_devices', ['user_id'], unique=False)
    op.create_index('idx_user_device_user_trusted', 'biometric_devices', ['user_id', 'is_trusted'], unique=False)
    op.create_index('idx_user_device_user_type', 'biometric_devices', ['user_id', 'device_type'], unique=False)
    op.create_index(op.f('ix_biometric_devices_id'), 'biometric_devices', ['id'], unique=False)
    op.create_table('contact_groups',
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('color', sa.String(length=7), nullable=True),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_contact_group_created_at', 'contact_groups', ['created_at'], unique=False)
    op.create_index('idx_contact_group_default', 'contact_groups', ['is_default'], unique=False)
    op.create_index('idx_contact_group_name', 'contact_groups', ['name'], unique=False)
    op.create_index('idx_contact_group_user_default', 'contact_groups', ['user_id', 'is_default'], unique=False)
    op.create_index('idx_contact_group_user_id', 'contact_groups', ['user_id'], unique=False)
    op.create_index('idx_contact_group_user_name', 'contact_groups', ['user_id', 'name'], unique=False)
    op.create_index(op.f('ix_contact_groups_id'), 'contact_groups', ['id'], unique=False)
    op.create_table('events',
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('event_type', sa.String(length=50), nullable=False),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('start_datetime', sa.DateTime(), nullable=False),
    sa.Column('end_datetime', sa.DateTime(), nullable=True),
    sa.Column('timezone', sa.String(length=50), nullable=True),
    sa.Column('venue_name', sa.String(length=255), nullable=True),
    sa.Column('venue_address', sa.Text(), nullable=True),
    sa.Column('venue_city', sa.String(length=100), nullable=True),
    sa.Column('venue_country', sa.String(length=100), nullable=True),
    sa.Column('latitude', sa.Float(), nullable=True),
    sa.Column('longitude', sa.Float(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('max_attendees', sa.Integer(), nullable=True),
    sa.Column('requires_approval', sa.Boolean(), nullable=False),
    sa.Column('allow_guest_invites', sa.Boolean(), nullable=False),
    sa.Column('total_budget', sa.Float(), nullable=True),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('theme_color', sa.String(length=7), nullable=True),
    sa.Column('cover_image_url', sa.String(length=500), nullable=True),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_event_city_type', 'events', ['venue_city', 'event_type'], unique=False)
    op.create_index('idx_event_created_at', 'events', ['created_at'], unique=False)
    op.create_index('idx_event_creator_id', 'events', ['creator_id'], unique=False)
    op.create_index('idx_event_creator_status', 'events', ['creator_id', 'status'], unique=False)
    op.create_index('idx_event_date_status', 'events', ['start_datetime', 'status'], unique=False)
    op.create_index('idx_event_is_active', 'events', ['is_active'], unique=False)
    op.create_index('idx_event_is_deleted', 'events', ['is_deleted'], unique=False)
    op.create_index('idx_event_is_public', 'events', ['is_public'], unique=False)
    op.create_index('idx_event_location', 'events', ['latitude', 'longitude'], unique=False)
    op.create_index('idx_event_start_datetime', 'events', ['start_datetime'], unique=False)
    op.create_index('idx_event_status', 'events', ['status'], unique=False)
    op.create_index('idx_event_type', 'events', ['event_type'], unique=False)
    op.create_index('idx_event_type_status', 'events', ['event_type', 'status'], unique=False)
    op.create_index('idx_event_venue_city', 'events', ['venue_city'], unique=False)
    op.create_index(op.f('ix_events_id'), 'events', ['id'], unique=False)
    op.create_table('invite_codes',
    sa.Column('code', sa.String(length=50), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('invite_type', sa.String(length=50), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('used_at', sa.DateTime(), nullable=True),
    sa.Column('used_by_user_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(length=255), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('qr_code_url', sa.String(length=500), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['used_by_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_invite_codes_active', 'invite_codes', ['is_active'], unique=False)
    op.create_index('idx_invite_codes_active_expires', 'invite_codes', ['is_active', 'expires_at'], unique=False)
    op.create_index('idx_invite_codes_code', 'invite_codes', ['code'], unique=False)
    op.create_index('idx_invite_codes_deleted', 'invite_codes', ['is_deleted'], unique=False)
    op.create_index('idx_invite_codes_expires_at', 'invite_codes', ['expires_at'], unique=False)
    op.create_index('idx_invite_codes_type', 'invite_codes', ['invite_type'], unique=False)
    op.create_index('idx_invite_codes_type_active', 'invite_codes', ['invite_type', 'is_active'], unique=False)
    op.create_index('idx_invite_codes_used_at', 'invite_codes', ['used_at'], unique=False)
    op.create_index('idx_invite_codes_user_id', 'invite_codes', ['user_id'], unique=False)
    op.create_index('idx_invite_codes_user_type', 'invite_codes', ['user_id', 'invite_type'], unique=False)
    op.create_index(op.f('ix_invite_codes_code'), 'invite_codes', ['code'], unique=True)
    op.create_index(op.f('ix_invite_codes_id'), 'invite_codes', ['id'], unique=False)
    op.create_index(op.f('ix_invite_codes_invite_type'), 'invite_codes', ['invite_type'], unique=False)
    op.create_index(op.f('ix_invite_codes_user_id'), 'invite_codes', ['user_id'], unique=False)
    op.create_table('invite_links',
    sa.Column('link_id', sa.String(length=100), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('max_uses', sa.Integer(), nullable=True),
    sa.Column('current_uses', sa.Integer(), nullable=False),
    sa.Column('invite_type', sa.String(length=50), nullable=False),
    sa.Column('custom_message', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_invite_links_active', 'invite_links', ['is_active'], unique=False)
    op.create_index('idx_invite_links_active_expires', 'invite_links', ['is_active', 'expires_at'], unique=False)
    op.create_index('idx_invite_links_current_uses', 'invite_links', ['current_uses'], unique=False)
    op.create_index('idx_invite_links_deleted', 'invite_links', ['is_deleted'], unique=False)
    op.create_index('idx_invite_links_expires_at', 'invite_links', ['expires_at'], unique=False)
    op.create_index('idx_invite_links_link_id', 'invite_links', ['link_id'], unique=False)
    op.create_index('idx_invite_links_type', 'invite_links', ['invite_type'], unique=False)
    op.create_index('idx_invite_links_type_active', 'invite_links', ['invite_type', 'is_active'], unique=False)
    op.create_index('idx_invite_links_user_id', 'invite_links', ['user_id'], unique=False)
    op.create_index('idx_invite_links_user_type', 'invite_links', ['user_id', 'invite_type'], unique=False)
    op.create_index(op.f('ix_invite_links_id'), 'invite_links', ['id'], unique=False)
    op.create_index(op.f('ix_invite_links_invite_type'), 'invite_links', ['invite_type'], unique=False)
    op.create_index(op.f('ix_invite_links_link_id'), 'invite_links', ['link_id'], unique=True)
    op.create_index(op.f('ix_invite_links_user_id'), 'invite_links', ['user_id'], unique=False)
    op.create_table('notification_devices',
    sa.Column('device_token', sa.String(length=500), nullable=False),
    sa.Column('device_id', sa.String(length=200), nullable=True),
    sa.Column('platform', sa.Enum('IOS', 'ANDROID', 'WEB', name='deviceplatform'), nullable=False),
    sa.Column('device_name', sa.String(length=200), nullable=True),
    sa.Column('app_version', sa.String(length=50), nullable=True),
    sa.Column('os_version', sa.String(length=50), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('device_token')
    )
    op.create_index('idx_userdevice_created_at', 'notification_devices', ['created_at'], unique=False)
    op.create_index('idx_userdevice_device_token', 'notification_devices', ['device_token'], unique=False)
    op.create_index('idx_userdevice_is_active', 'notification_devices', ['is_active'], unique=False)
    op.create_index('idx_userdevice_last_used', 'notification_devices', ['last_used_at'], unique=False)
    op.create_index('idx_userdevice_platform', 'notification_devices', ['platform'], unique=False)
    op.create_index('idx_userdevice_user_active', 'notification_devices', ['user_id', 'is_active'], unique=False)
    op.create_index('idx_userdevice_user_id', 'notification_devices', ['user_id'], unique=False)
    op.create_index(op.f('ix_notification_devices_id'), 'notification_devices', ['id'], unique=False)
    op.create_table('notification_preferences',
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('email_enabled', sa.Boolean(), nullable=False),
    sa.Column('sms_enabled', sa.Boolean(), nullable=False),
    sa.Column('push_enabled', sa.Boolean(), nullable=False),
    sa.Column('in_app_enabled', sa.Boolean(), nullable=False),
    sa.Column('advance_notice_hours', sa.Integer(), nullable=False),
    sa.Column('quiet_hours_start', sa.String(length=5), nullable=True),
    sa.Column('quiet_hours_end', sa.String(length=5), nullable=True),
    sa.Column('max_daily_notifications', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_notificationpref_created_at', 'notification_preferences', ['created_at'], unique=False)
    op.create_index('idx_notificationpref_email_enabled', 'notification_preferences', ['email_enabled'], unique=False)
    op.create_index('idx_notificationpref_in_app_enabled', 'notification_preferences', ['in_app_enabled'], unique=False)
    op.create_index('idx_notificationpref_notification_type', 'notification_preferences', ['notification_type'], unique=False)
    op.create_index('idx_notificationpref_push_enabled', 'notification_preferences', ['push_enabled'], unique=False)
    op.create_index('idx_notificationpref_sms_enabled', 'notification_preferences', ['sms_enabled'], unique=False)
    op.create_index('idx_notificationpref_user_email', 'notification_preferences', ['user_id', 'email_enabled'], unique=False)
    op.create_index('idx_notificationpref_user_id', 'notification_preferences', ['user_id'], unique=False)
    op.create_index('idx_notificationpref_user_push', 'notification_preferences', ['user_id', 'push_enabled'], unique=False)
    op.create_index('idx_notificationpref_user_type', 'notification_preferences', ['user_id', 'notification_type'], unique=False)
    op.create_index(op.f('ix_notification_preferences_id'), 'notification_preferences', ['id'], unique=False)
    op.create_table('reminder_templates',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('subject_template', sa.String(length=200), nullable=False),
    sa.Column('message_template', sa.Text(), nullable=False),
    sa.Column('is_system_template', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('default_advance_hours', sa.Integer(), nullable=False),
    sa.Column('default_frequency', sa.Enum('ONCE', 'DAILY', 'WEEKLY', 'CUSTOM', name='reminderfrequency'), nullable=False),
    sa.Column('template_variables', sa.Text(), nullable=True),
    sa.Column('creator_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_reminder_templates_id'), 'reminder_templates', ['id'], unique=False)
    op.create_table('timeline_templates',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('event_type', sa.String(length=100), nullable=False),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('is_verified', sa.Boolean(), nullable=False),
    sa.Column('usage_count', sa.Integer(), nullable=False),
    sa.Column('default_duration_hours', sa.Integer(), nullable=False),
    sa.Column('setup_time_minutes', sa.Integer(), nullable=False),
    sa.Column('cleanup_time_minutes', sa.Integer(), nullable=False),
    sa.Column('template_data', sa.Text(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timeline_template_created_at', 'timeline_templates', ['created_at'], unique=False)
    op.create_index('idx_timeline_template_creator_id', 'timeline_templates', ['creator_id'], unique=False)
    op.create_index('idx_timeline_template_creator_type', 'timeline_templates', ['creator_id', 'event_type'], unique=False)
    op.create_index('idx_timeline_template_event_type', 'timeline_templates', ['event_type'], unique=False)
    op.create_index('idx_timeline_template_is_public', 'timeline_templates', ['is_public'], unique=False)
    op.create_index('idx_timeline_template_is_verified', 'timeline_templates', ['is_verified'], unique=False)
    op.create_index('idx_timeline_template_public_type', 'timeline_templates', ['is_public', 'event_type'], unique=False)
    op.create_index('idx_timeline_template_updated_at', 'timeline_templates', ['updated_at'], unique=False)
    op.create_index('idx_timeline_template_usage_count', 'timeline_templates', ['usage_count'], unique=False)
    op.create_index('idx_timeline_template_usage_public', 'timeline_templates', ['usage_count', 'is_public'], unique=False)
    op.create_index('idx_timeline_template_verified_public', 'timeline_templates', ['is_verified', 'is_public'], unique=False)
    op.create_index(op.f('ix_timeline_templates_id'), 'timeline_templates', ['id'], unique=False)
    op.create_table('usage_limits',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('period_start', sa.DateTime(), nullable=False),
    sa.Column('period_end', sa.DateTime(), nullable=False),
    sa.Column('events_created', sa.Integer(), nullable=False),
    sa.Column('storage_used_gb', sa.Float(), nullable=False),
    sa.Column('api_calls_made', sa.Integer(), nullable=False),
    sa.Column('events_limit', sa.Integer(), nullable=True),
    sa.Column('storage_limit_gb', sa.Float(), nullable=True),
    sa.Column('api_calls_limit', sa.Integer(), nullable=True),
    sa.Column('events_exceeded', sa.Boolean(), nullable=False),
    sa.Column('storage_exceeded', sa.Boolean(), nullable=False),
    sa.Column('api_calls_exceeded', sa.Boolean(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_usage_exceeded', 'usage_limits', ['events_exceeded', 'storage_exceeded', 'api_calls_exceeded'], unique=False)
    op.create_index('idx_usage_period', 'usage_limits', ['period_start', 'period_end'], unique=False)
    op.create_index('idx_usage_user', 'usage_limits', ['user_id'], unique=False)
    op.create_index('idx_usage_user_period', 'usage_limits', ['user_id', 'period_start', 'period_end'], unique=False)
    op.create_index(op.f('ix_usage_limits_id'), 'usage_limits', ['id'], unique=False)
    op.create_table('user_contacts',
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('phone_number', sa.String(length=20), nullable=True),
    sa.Column('email', sa.String(length=255), nullable=True),
    sa.Column('source', sa.Enum('PHONE', 'EMAIL', 'MANUAL', 'IMPORTED', name='contactsource'), nullable=False),
    sa.Column('is_favorite', sa.Boolean(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('tags', sa.Text(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_user_contact_created_at', 'user_contacts', ['created_at'], unique=False)
    op.create_index('idx_user_contact_email', 'user_contacts', ['email'], unique=False)
    op.create_index('idx_user_contact_email_user', 'user_contacts', ['email', 'user_id'], unique=False)
    op.create_index('idx_user_contact_favorite', 'user_contacts', ['is_favorite'], unique=False)
    op.create_index('idx_user_contact_name', 'user_contacts', ['name'], unique=False)
    op.create_index('idx_user_contact_phone', 'user_contacts', ['phone_number'], unique=False)
    op.create_index('idx_user_contact_phone_user', 'user_contacts', ['phone_number', 'user_id'], unique=False)
    op.create_index('idx_user_contact_source', 'user_contacts', ['source'], unique=False)
    op.create_index('idx_user_contact_user_favorite', 'user_contacts', ['user_id', 'is_favorite'], unique=False)
    op.create_index('idx_user_contact_user_id', 'user_contacts', ['user_id'], unique=False)
    op.create_index('idx_user_contact_user_name', 'user_contacts', ['user_id', 'name'], unique=False)
    op.create_index('idx_user_contact_user_source', 'user_contacts', ['user_id', 'source'], unique=False)
    op.create_index(op.f('ix_user_contacts_id'), 'user_contacts', ['id'], unique=False)
    op.create_table('user_friends',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('friend_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['friend_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('user_id', 'friend_id')
    )
    op.create_table('user_profiles',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('occupation', sa.String(length=100), nullable=True),
    sa.Column('company', sa.String(length=100), nullable=True),
    sa.Column('website', sa.String(length=255), nullable=True),
    sa.Column('instagram_handle', sa.String(length=100), nullable=True),
    sa.Column('twitter_handle', sa.String(length=100), nullable=True),
    sa.Column('linkedin_url', sa.String(length=255), nullable=True),
    sa.Column('favorite_event_types', sa.Text(), nullable=True),
    sa.Column('planning_style', sa.String(length=50), nullable=True),
    sa.Column('budget_range', sa.String(length=50), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_id')
    )
    op.create_index('idx_userprofile_budget_range', 'user_profiles', ['budget_range'], unique=False)
    op.create_index('idx_userprofile_company', 'user_profiles', ['company'], unique=False)
    op.create_index('idx_userprofile_created_at', 'user_profiles', ['created_at'], unique=False)
    op.create_index('idx_userprofile_occupation', 'user_profiles', ['occupation'], unique=False)
    op.create_index('idx_userprofile_occupation_company', 'user_profiles', ['occupation', 'company'], unique=False)
    op.create_index('idx_userprofile_planning_style', 'user_profiles', ['planning_style'], unique=False)
    op.create_index('idx_userprofile_style_budget', 'user_profiles', ['planning_style', 'budget_range'], unique=False)
    op.create_index('idx_userprofile_user_id', 'user_profiles', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_profiles_id'), 'user_profiles', ['id'], unique=False)
    op.create_table('user_sessions',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('session_token', sa.String(length=255), nullable=False),
    sa.Column('refresh_token', sa.String(length=255), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('ip_address', sa.String(length=45), nullable=True),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('device_info', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('refresh_token'),
    sa.UniqueConstraint('session_token')
    )
    op.create_index('idx_usersession_active_expires', 'user_sessions', ['is_active', 'expires_at'], unique=False)
    op.create_index('idx_usersession_created_at', 'user_sessions', ['created_at'], unique=False)
    op.create_index('idx_usersession_expires_at', 'user_sessions', ['expires_at'], unique=False)
    op.create_index('idx_usersession_ip_address', 'user_sessions', ['ip_address'], unique=False)
    op.create_index('idx_usersession_is_active', 'user_sessions', ['is_active'], unique=False)
    op.create_index('idx_usersession_refresh_token', 'user_sessions', ['refresh_token'], unique=False)
    op.create_index('idx_usersession_session_token', 'user_sessions', ['session_token'], unique=False)
    op.create_index('idx_usersession_user_active', 'user_sessions', ['user_id', 'is_active'], unique=False)
    op.create_index('idx_usersession_user_expires', 'user_sessions', ['user_id', 'expires_at'], unique=False)
    op.create_index('idx_usersession_user_id', 'user_sessions', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_sessions_id'), 'user_sessions', ['id'], unique=False)
    op.create_table('user_subscriptions',
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('plan_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'CANCELED', 'PAST_DUE', 'TRIALING', 'INCOMPLETE', 'INCOMPLETE_EXPIRED', 'UNPAID', name='subscriptionstatus'), nullable=False),
    sa.Column('billing_interval', sa.Enum('MONTHLY', 'YEARLY', name='billinginterval'), nullable=False),
    sa.Column('start_date', sa.DateTime(), nullable=False),
    sa.Column('end_date', sa.DateTime(), nullable=True),
    sa.Column('trial_end_date', sa.DateTime(), nullable=True),
    sa.Column('current_period_start', sa.DateTime(), nullable=True),
    sa.Column('current_period_end', sa.DateTime(), nullable=True),
    sa.Column('canceled_at', sa.DateTime(), nullable=True),
    sa.Column('stripe_subscription_id', sa.String(length=100), nullable=True),
    sa.Column('stripe_customer_id', sa.String(length=100), nullable=True),
    sa.Column('events_created_this_period', sa.Integer(), nullable=False),
    sa.Column('storage_used_gb', sa.Float(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['plan_id'], ['subscription_plans.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('stripe_subscription_id')
    )
    op.create_index('idx_stripe_customer', 'user_subscriptions', ['stripe_customer_id'], unique=False)
    op.create_index('idx_stripe_subscription', 'user_subscriptions', ['stripe_subscription_id'], unique=False)
    op.create_index('idx_subscription_dates', 'user_subscriptions', ['start_date', 'end_date'], unique=False)
    op.create_index('idx_subscription_period', 'user_subscriptions', ['current_period_start', 'current_period_end'], unique=False)
    op.create_index('idx_subscription_status', 'user_subscriptions', ['status'], unique=False)
    op.create_index('idx_user_status', 'user_subscriptions', ['user_id', 'status'], unique=False)
    op.create_index('idx_user_subscription', 'user_subscriptions', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_subscriptions_id'), 'user_subscriptions', ['id'], unique=False)
    op.create_table('vendors',
    sa.Column('business_name', sa.String(length=200), nullable=False),
    sa.Column('display_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('email', sa.String(length=255), nullable=False),
    sa.Column('phone', sa.String(length=20), nullable=True),
    sa.Column('website', sa.String(length=500), nullable=True),
    sa.Column('category', sa.Enum('VENUE', 'CATERING', 'PHOTOGRAPHY', 'VIDEOGRAPHY', 'MUSIC_DJ', 'ENTERTAINMENT', 'FLORIST', 'DECORATION', 'TRANSPORTATION', 'SECURITY', 'CLEANING', 'EQUIPMENT_RENTAL', 'OTHER', name='vendorcategory'), nullable=False),
    sa.Column('subcategories', sa.Text(), nullable=True),
    sa.Column('address', sa.Text(), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=True),
    sa.Column('postal_code', sa.String(length=20), nullable=True),
    sa.Column('latitude', sa.Float(), nullable=True),
    sa.Column('longitude', sa.Float(), nullable=True),
    sa.Column('service_radius_km', sa.Integer(), nullable=True),
    sa.Column('service_areas', sa.Text(), nullable=True),
    sa.Column('years_in_business', sa.Integer(), nullable=True),
    sa.Column('license_number', sa.String(length=100), nullable=True),
    sa.Column('insurance_verified', sa.Boolean(), nullable=False),
    sa.Column('base_price', sa.Float(), nullable=True),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('pricing_model', sa.Enum('HOURLY', 'FIXED_PRICE', 'PACKAGE', 'CUSTOM_QUOTE', name='servicetype'), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'PENDING_VERIFICATION', 'VERIFIED', 'SUSPENDED', name='vendorstatus'), nullable=False),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('verification_date', sa.DateTime(), nullable=True),
    sa.Column('logo_url', sa.String(length=500), nullable=True),
    sa.Column('cover_image_url', sa.String(length=500), nullable=True),
    sa.Column('average_rating', sa.Float(), nullable=False),
    sa.Column('total_reviews', sa.Integer(), nullable=False),
    sa.Column('total_bookings', sa.Integer(), nullable=False),
    sa.Column('availability_calendar', sa.Text(), nullable=True),
    sa.Column('booking_lead_time_days', sa.Integer(), nullable=False),
    sa.Column('accepts_online_payment', sa.Boolean(), nullable=False),
    sa.Column('payment_methods', sa.Text(), nullable=True),
    sa.Column('stripe_account_id', sa.String(length=100), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('email')
    )
    op.create_index('idx_vendor_average_rating', 'vendors', ['average_rating'], unique=False)
    op.create_index('idx_vendor_category', 'vendors', ['category'], unique=False)
    op.create_index('idx_vendor_category_status', 'vendors', ['category', 'status'], unique=False)
    op.create_index('idx_vendor_city', 'vendors', ['city'], unique=False)
    op.create_index('idx_vendor_city_category', 'vendors', ['city', 'category'], unique=False)
    op.create_index('idx_vendor_email', 'vendors', ['email'], unique=False)
    op.create_index('idx_vendor_is_featured', 'vendors', ['is_featured'], unique=False)
    op.create_index('idx_vendor_location', 'vendors', ['latitude', 'longitude'], unique=False)
    op.create_index('idx_vendor_status', 'vendors', ['status'], unique=False)
    op.create_index('idx_vendor_stripe_account_id', 'vendors', ['stripe_account_id'], unique=False)
    op.create_index(op.f('ix_vendors_id'), 'vendors', ['id'], unique=False)
    op.create_table('ai_chat_sessions',
    sa.Column('session_id', sa.String(length=36), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'COMPLETED', 'CANCELLED', name='chatsessionstatus'), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('event_data', sa.Text(), nullable=True),
    sa.Column('context', sa.Text(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('created_event_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['created_event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('session_id')
    )
    op.create_index('idx_ai_chat_session_completed_at', 'ai_chat_sessions', ['completed_at'], unique=False)
    op.create_index('idx_ai_chat_session_created_at', 'ai_chat_sessions', ['created_at'], unique=False)
    op.create_index('idx_ai_chat_session_created_event_id', 'ai_chat_sessions', ['created_event_id'], unique=False)
    op.create_index('idx_ai_chat_session_session_id', 'ai_chat_sessions', ['session_id'], unique=False)
    op.create_index('idx_ai_chat_session_status', 'ai_chat_sessions', ['status'], unique=False)
    op.create_index('idx_ai_chat_session_status_created', 'ai_chat_sessions', ['status', 'created_at'], unique=False)
    op.create_index('idx_ai_chat_session_updated_at', 'ai_chat_sessions', ['updated_at'], unique=False)
    op.create_index('idx_ai_chat_session_user_created', 'ai_chat_sessions', ['user_id', 'created_at'], unique=False)
    op.create_index('idx_ai_chat_session_user_id', 'ai_chat_sessions', ['user_id'], unique=False)
    op.create_index('idx_ai_chat_session_user_status', 'ai_chat_sessions', ['user_id', 'status'], unique=False)
    op.create_index(op.f('ix_ai_chat_sessions_id'), 'ai_chat_sessions', ['id'], unique=False)
    op.create_table('automation_rules',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('trigger_event', sa.String(length=100), nullable=False),
    sa.Column('trigger_conditions', sa.Text(), nullable=True),
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('delay_hours', sa.Integer(), nullable=False),
    sa.Column('advance_hours', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('apply_to_all_events', sa.Boolean(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['template_id'], ['reminder_templates.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_automation_rules_id'), 'automation_rules', ['id'], unique=False)
    op.create_table('biometric_auth_attempts',
    sa.Column('was_successful', sa.Boolean(), nullable=False),
    sa.Column('failure_reason', sa.String(length=255), nullable=True),
    sa.Column('ip_address', sa.String(length=45), nullable=True),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('location', sa.String(length=255), nullable=True),
    sa.Column('response_time_ms', sa.Integer(), nullable=True),
    sa.Column('biometric_auth_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['biometric_auth_id'], ['biometric_auths.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_biometric_attempt_auth_created', 'biometric_auth_attempts', ['biometric_auth_id', 'created_at'], unique=False)
    op.create_index('idx_biometric_attempt_auth_id', 'biometric_auth_attempts', ['biometric_auth_id'], unique=False)
    op.create_index('idx_biometric_attempt_auth_success', 'biometric_auth_attempts', ['biometric_auth_id', 'was_successful'], unique=False)
    op.create_index('idx_biometric_attempt_created_at', 'biometric_auth_attempts', ['created_at'], unique=False)
    op.create_index('idx_biometric_attempt_ip', 'biometric_auth_attempts', ['ip_address'], unique=False)
    op.create_index('idx_biometric_attempt_ip_created', 'biometric_auth_attempts', ['ip_address', 'created_at'], unique=False)
    op.create_index('idx_biometric_attempt_successful', 'biometric_auth_attempts', ['was_successful'], unique=False)
    op.create_index(op.f('ix_biometric_auth_attempts_id'), 'biometric_auth_attempts', ['id'], unique=False)
    op.create_table('biometric_tokens',
    sa.Column('token', sa.String(length=255), nullable=False),
    sa.Column('token_type', sa.String(length=50), nullable=False),
    sa.Column('challenge_data', sa.Text(), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=False),
    sa.Column('is_used', sa.Boolean(), nullable=False),
    sa.Column('used_at', sa.DateTime(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('device_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['device_id'], ['biometric_devices.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('token')
    )
    op.create_index('idx_biometric_token_created_at', 'biometric_tokens', ['created_at'], unique=False)
    op.create_index('idx_biometric_token_device_id', 'biometric_tokens', ['device_id'], unique=False)
    op.create_index('idx_biometric_token_expires_at', 'biometric_tokens', ['expires_at'], unique=False)
    op.create_index('idx_biometric_token_token', 'biometric_tokens', ['token'], unique=False)
    op.create_index('idx_biometric_token_token_used', 'biometric_tokens', ['token', 'is_used'], unique=False)
    op.create_index('idx_biometric_token_type', 'biometric_tokens', ['token_type'], unique=False)
    op.create_index('idx_biometric_token_used', 'biometric_tokens', ['is_used'], unique=False)
    op.create_index('idx_biometric_token_user_expires', 'biometric_tokens', ['user_id', 'expires_at'], unique=False)
    op.create_index('idx_biometric_token_user_id', 'biometric_tokens', ['user_id'], unique=False)
    op.create_index('idx_biometric_token_user_type', 'biometric_tokens', ['user_id', 'token_type'], unique=False)
    op.create_index(op.f('ix_biometric_tokens_id'), 'biometric_tokens', ['id'], unique=False)
    op.create_table('comments',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('author_id', sa.Integer(), nullable=False),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['author_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['comments.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_comment_author_created', 'comments', ['author_id', 'created_at'], unique=False)
    op.create_index('idx_comment_author_id', 'comments', ['author_id'], unique=False)
    op.create_index('idx_comment_created_at', 'comments', ['created_at'], unique=False)
    op.create_index('idx_comment_event_created', 'comments', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_comment_event_id', 'comments', ['event_id'], unique=False)
    op.create_index('idx_comment_is_deleted', 'comments', ['is_deleted'], unique=False)
    op.create_index('idx_comment_parent_id', 'comments', ['parent_id'], unique=False)
    op.create_index(op.f('ix_comments_id'), 'comments', ['id'], unique=False)
    op.create_table('contact_group_memberships',
    sa.Column('contact_id', sa.Integer(), nullable=False),
    sa.Column('group_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['contact_id'], ['user_contacts.id'], ),
    sa.ForeignKeyConstraint(['group_id'], ['contact_groups.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_contact_group_membership_contact', 'contact_group_memberships', ['contact_id'], unique=False)
    op.create_index('idx_contact_group_membership_contact_group', 'contact_group_memberships', ['contact_id', 'group_id'], unique=False)
    op.create_index('idx_contact_group_membership_created_at', 'contact_group_memberships', ['created_at'], unique=False)
    op.create_index('idx_contact_group_membership_group', 'contact_group_memberships', ['group_id'], unique=False)
    op.create_index(op.f('ix_contact_group_memberships_id'), 'contact_group_memberships', ['id'], unique=False)
    op.create_table('contact_invitations',
    sa.Column('invitation_type', sa.String(length=50), nullable=False),
    sa.Column('message', sa.Text(), nullable=True),
    sa.Column('custom_message', sa.Text(), nullable=True),
    sa.Column('delivery_method', sa.String(length=20), nullable=False),
    sa.Column('recipient_phone', sa.String(length=20), nullable=True),
    sa.Column('recipient_email', sa.String(length=255), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'SENT', 'DELIVERED', 'OPENED', 'ACCEPTED', 'DECLINED', 'EXPIRED', 'FAILED', name='contactinvitestatus'), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=True),
    sa.Column('delivered_at', sa.DateTime(), nullable=True),
    sa.Column('opened_at', sa.DateTime(), nullable=True),
    sa.Column('responded_at', sa.DateTime(), nullable=True),
    sa.Column('tracking_id', sa.String(length=100), nullable=True),
    sa.Column('failure_reason', sa.Text(), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('contact_id', sa.Integer(), nullable=False),
    sa.Column('sender_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['contact_id'], ['user_contacts.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['sender_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_contact_invitation_contact_id', 'contact_invitations', ['contact_id'], unique=False)
    op.create_index('idx_contact_invitation_contact_status', 'contact_invitations', ['contact_id', 'status'], unique=False)
    op.create_index('idx_contact_invitation_created_at', 'contact_invitations', ['created_at'], unique=False)
    op.create_index('idx_contact_invitation_email', 'contact_invitations', ['recipient_email'], unique=False)
    op.create_index('idx_contact_invitation_email_status', 'contact_invitations', ['recipient_email', 'status'], unique=False)
    op.create_index('idx_contact_invitation_event_id', 'contact_invitations', ['event_id'], unique=False)
    op.create_index('idx_contact_invitation_event_status', 'contact_invitations', ['event_id', 'status'], unique=False)
    op.create_index('idx_contact_invitation_expires_at', 'contact_invitations', ['expires_at'], unique=False)
    op.create_index('idx_contact_invitation_method', 'contact_invitations', ['delivery_method'], unique=False)
    op.create_index('idx_contact_invitation_method_status', 'contact_invitations', ['delivery_method', 'status'], unique=False)
    op.create_index('idx_contact_invitation_phone', 'contact_invitations', ['recipient_phone'], unique=False)
    op.create_index('idx_contact_invitation_phone_status', 'contact_invitations', ['recipient_phone', 'status'], unique=False)
    op.create_index('idx_contact_invitation_sender_created', 'contact_invitations', ['sender_id', 'created_at'], unique=False)
    op.create_index('idx_contact_invitation_sender_id', 'contact_invitations', ['sender_id'], unique=False)
    op.create_index('idx_contact_invitation_sender_status', 'contact_invitations', ['sender_id', 'status'], unique=False)
    op.create_index('idx_contact_invitation_sent_at', 'contact_invitations', ['sent_at'], unique=False)
    op.create_index('idx_contact_invitation_status', 'contact_invitations', ['status'], unique=False)
    op.create_index('idx_contact_invitation_tracking_id', 'contact_invitations', ['tracking_id'], unique=False)
    op.create_index('idx_contact_invitation_type', 'contact_invitations', ['invitation_type'], unique=False)
    op.create_index('idx_contact_invitation_type_status', 'contact_invitations', ['invitation_type', 'status'], unique=False)
    op.create_index(op.f('ix_contact_invitations_id'), 'contact_invitations', ['id'], unique=False)
    op.create_table('event_chat_settings',
    sa.Column('is_enabled', sa.Boolean(), nullable=False),
    sa.Column('allow_file_uploads', sa.Boolean(), nullable=False),
    sa.Column('allow_reactions', sa.Boolean(), nullable=False),
    sa.Column('max_file_size_mb', sa.Integer(), nullable=False),
    sa.Column('allowed_file_types', sa.Text(), nullable=True),
    sa.Column('require_approval', sa.Boolean(), nullable=False),
    sa.Column('auto_delete_after_days', sa.Integer(), nullable=True),
    sa.Column('notify_on_new_message', sa.Boolean(), nullable=False),
    sa.Column('notify_on_mention', sa.Boolean(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('event_id')
    )
    op.create_index('idx_eventchatsettings_allow_file_uploads', 'event_chat_settings', ['allow_file_uploads'], unique=False)
    op.create_index('idx_eventchatsettings_allow_reactions', 'event_chat_settings', ['allow_reactions'], unique=False)
    op.create_index('idx_eventchatsettings_created_at', 'event_chat_settings', ['created_at'], unique=False)
    op.create_index('idx_eventchatsettings_event_id', 'event_chat_settings', ['event_id'], unique=False)
    op.create_index('idx_eventchatsettings_is_enabled', 'event_chat_settings', ['is_enabled'], unique=False)
    op.create_index('idx_eventchatsettings_notify_mention', 'event_chat_settings', ['notify_on_mention'], unique=False)
    op.create_index('idx_eventchatsettings_notify_new_message', 'event_chat_settings', ['notify_on_new_message'], unique=False)
    op.create_index('idx_eventchatsettings_require_approval', 'event_chat_settings', ['require_approval'], unique=False)
    op.create_index(op.f('ix_event_chat_settings_id'), 'event_chat_settings', ['id'], unique=False)
    op.create_table('event_collaborators',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('event_id', 'user_id')
    )
    op.create_table('event_invitations',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('rsvp_status', sa.String(length=20), nullable=False),
    sa.Column('invitation_message', sa.Text(), nullable=True),
    sa.Column('response_message', sa.Text(), nullable=True),
    sa.Column('plus_one_allowed', sa.Boolean(), nullable=False),
    sa.Column('plus_one_name', sa.String(length=255), nullable=True),
    sa.Column('dietary_restrictions', sa.Text(), nullable=True),
    sa.Column('special_requests', sa.Text(), nullable=True),
    sa.Column('invited_at', sa.DateTime(), nullable=True),
    sa.Column('responded_at', sa.DateTime(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_invitation_event_id', 'event_invitations', ['event_id'], unique=False)
    op.create_index('idx_invitation_event_status', 'event_invitations', ['event_id', 'rsvp_status'], unique=False)
    op.create_index('idx_invitation_invited_at', 'event_invitations', ['invited_at'], unique=False)
    op.create_index('idx_invitation_is_deleted', 'event_invitations', ['is_deleted'], unique=False)
    op.create_index('idx_invitation_responded_at', 'event_invitations', ['responded_at'], unique=False)
    op.create_index('idx_invitation_rsvp_status', 'event_invitations', ['rsvp_status'], unique=False)
    op.create_index('idx_invitation_user_id', 'event_invitations', ['user_id'], unique=False)
    op.create_index('idx_invitation_user_status', 'event_invitations', ['user_id', 'rsvp_status'], unique=False)
    op.create_index(op.f('ix_event_invitations_id'), 'event_invitations', ['id'], unique=False)
    op.create_table('event_timelines',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_template', sa.Boolean(), nullable=False),
    sa.Column('auto_generated', sa.Boolean(), nullable=False),
    sa.Column('start_time', sa.Time(), nullable=True),
    sa.Column('end_time', sa.Time(), nullable=True),
    sa.Column('total_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('default_buffer_minutes', sa.Integer(), nullable=False),
    sa.Column('setup_buffer_minutes', sa.Integer(), nullable=False),
    sa.Column('cleanup_buffer_minutes', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_event_timeline_active_template', 'event_timelines', ['is_active', 'is_template'], unique=False)
    op.create_index('idx_event_timeline_auto_generated', 'event_timelines', ['auto_generated'], unique=False)
    op.create_index('idx_event_timeline_created_at', 'event_timelines', ['created_at'], unique=False)
    op.create_index('idx_event_timeline_creator_created', 'event_timelines', ['creator_id', 'created_at'], unique=False)
    op.create_index('idx_event_timeline_creator_id', 'event_timelines', ['creator_id'], unique=False)
    op.create_index('idx_event_timeline_end_time', 'event_timelines', ['end_time'], unique=False)
    op.create_index('idx_event_timeline_event_active', 'event_timelines', ['event_id', 'is_active'], unique=False)
    op.create_index('idx_event_timeline_event_id', 'event_timelines', ['event_id'], unique=False)
    op.create_index('idx_event_timeline_event_template', 'event_timelines', ['event_id', 'is_template'], unique=False)
    op.create_index('idx_event_timeline_is_active', 'event_timelines', ['is_active'], unique=False)
    op.create_index('idx_event_timeline_is_template', 'event_timelines', ['is_template'], unique=False)
    op.create_index('idx_event_timeline_start_time', 'event_timelines', ['start_time'], unique=False)
    op.create_index('idx_event_timeline_updated_at', 'event_timelines', ['updated_at'], unique=False)
    op.create_index(op.f('ix_event_timelines_id'), 'event_timelines', ['id'], unique=False)
    op.create_table('expenses',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('paid_by_user_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('amount', sa.Float(), nullable=False),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('receipt_url', sa.String(length=500), nullable=True),
    sa.Column('vendor_name', sa.String(length=255), nullable=True),
    sa.Column('expense_date', sa.DateTime(), nullable=False),
    sa.Column('is_shared', sa.Boolean(), nullable=False),
    sa.Column('split_equally', sa.Boolean(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['paid_by_user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_expense_amount', 'expenses', ['amount'], unique=False)
    op.create_index('idx_expense_category', 'expenses', ['category'], unique=False)
    op.create_index('idx_expense_date', 'expenses', ['expense_date'], unique=False)
    op.create_index('idx_expense_event_category', 'expenses', ['event_id', 'category'], unique=False)
    op.create_index('idx_expense_event_date', 'expenses', ['event_id', 'expense_date'], unique=False)
    op.create_index('idx_expense_event_id', 'expenses', ['event_id'], unique=False)
    op.create_index('idx_expense_is_deleted', 'expenses', ['is_deleted'], unique=False)
    op.create_index('idx_expense_is_shared', 'expenses', ['is_shared'], unique=False)
    op.create_index('idx_expense_paid_by_user_id', 'expenses', ['paid_by_user_id'], unique=False)
    op.create_index('idx_expense_user_date', 'expenses', ['paid_by_user_id', 'expense_date'], unique=False)
    op.create_index(op.f('ix_expenses_id'), 'expenses', ['id'], unique=False)
    op.create_table('games',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('game_type', sa.Enum('TRIVIA', 'ICEBREAKER', 'PARTY_GAME', 'QUIZ', 'SCAVENGER_HUNT', 'BINGO', 'CUSTOM', name='gametype'), nullable=False),
    sa.Column('difficulty', sa.Enum('EASY', 'MEDIUM', 'HARD', name='gamedifficulty'), nullable=False),
    sa.Column('min_players', sa.Integer(), nullable=False),
    sa.Column('max_players', sa.Integer(), nullable=True),
    sa.Column('estimated_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('instructions', sa.Text(), nullable=False),
    sa.Column('materials_needed', sa.Text(), nullable=True),
    sa.Column('game_data', sa.Text(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('age_appropriate', sa.Boolean(), nullable=False),
    sa.Column('tags', sa.Text(), nullable=True),
    sa.Column('categories', sa.Text(), nullable=True),
    sa.Column('event_id', sa.Integer(), nullable=True),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_game_age_appropriate', 'games', ['age_appropriate'], unique=False)
    op.create_index('idx_game_created_at', 'games', ['created_at'], unique=False)
    op.create_index('idx_game_creator_id', 'games', ['creator_id'], unique=False)
    op.create_index('idx_game_creator_type', 'games', ['creator_id', 'game_type'], unique=False)
    op.create_index('idx_game_difficulty', 'games', ['difficulty'], unique=False)
    op.create_index('idx_game_event_id', 'games', ['event_id'], unique=False)
    op.create_index('idx_game_event_type', 'games', ['event_id', 'game_type'], unique=False)
    op.create_index('idx_game_is_public', 'games', ['is_public'], unique=False)
    op.create_index('idx_game_max_players', 'games', ['max_players'], unique=False)
    op.create_index('idx_game_min_players', 'games', ['min_players'], unique=False)
    op.create_index('idx_game_players_difficulty', 'games', ['min_players', 'max_players', 'difficulty'], unique=False)
    op.create_index('idx_game_public_type', 'games', ['is_public', 'game_type'], unique=False)
    op.create_index('idx_game_type', 'games', ['game_type'], unique=False)
    op.create_index('idx_game_type_difficulty', 'games', ['game_type', 'difficulty'], unique=False)
    op.create_index('idx_game_updated_at', 'games', ['updated_at'], unique=False)
    op.create_index(op.f('ix_games_id'), 'games', ['id'], unique=False)
    op.create_table('invite_link_usages',
    sa.Column('invite_link_id', sa.Integer(), nullable=False),
    sa.Column('used_by_user_id', sa.Integer(), nullable=True),
    sa.Column('ip_address', sa.String(length=45), nullable=True),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('referrer', sa.String(length=500), nullable=True),
    sa.Column('was_successful', sa.Boolean(), nullable=False),
    sa.Column('failure_reason', sa.String(length=255), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['invite_link_id'], ['invite_links.id'], ),
    sa.ForeignKeyConstraint(['used_by_user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_invite_link_usages_created_at', 'invite_link_usages', ['created_at'], unique=False)
    op.create_index('idx_invite_link_usages_ip', 'invite_link_usages', ['ip_address'], unique=False)
    op.create_index('idx_invite_link_usages_link_created', 'invite_link_usages', ['invite_link_id', 'created_at'], unique=False)
    op.create_index('idx_invite_link_usages_link_id', 'invite_link_usages', ['invite_link_id'], unique=False)
    op.create_index('idx_invite_link_usages_successful', 'invite_link_usages', ['was_successful'], unique=False)
    op.create_index('idx_invite_link_usages_user_created', 'invite_link_usages', ['used_by_user_id', 'created_at'], unique=False)
    op.create_index('idx_invite_link_usages_user_id', 'invite_link_usages', ['used_by_user_id'], unique=False)
    op.create_index(op.f('ix_invite_link_usages_id'), 'invite_link_usages', ['id'], unique=False)
    op.create_index(op.f('ix_invite_link_usages_invite_link_id'), 'invite_link_usages', ['invite_link_id'], unique=False)
    op.create_table('media',
    sa.Column('filename', sa.String(length=255), nullable=False),
    sa.Column('original_filename', sa.String(length=255), nullable=False),
    sa.Column('file_path', sa.String(length=500), nullable=False),
    sa.Column('file_url', sa.String(length=500), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('mime_type', sa.String(length=100), nullable=False),
    sa.Column('media_type', sa.String(length=20), nullable=False),
    sa.Column('width', sa.Integer(), nullable=True),
    sa.Column('height', sa.Integer(), nullable=True),
    sa.Column('duration', sa.Float(), nullable=True),
    sa.Column('title', sa.String(length=255), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('alt_text', sa.String(length=255), nullable=True),
    sa.Column('uploader_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('is_processed', sa.Boolean(), nullable=False),
    sa.Column('processing_status', sa.String(length=50), nullable=True),
    sa.Column('thumbnail_url', sa.String(length=500), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['uploader_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_media_created_at', 'media', ['created_at'], unique=False)
    op.create_index('idx_media_event_created', 'media', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_media_event_featured', 'media', ['event_id', 'is_featured'], unique=False)
    op.create_index('idx_media_event_id', 'media', ['event_id'], unique=False)
    op.create_index('idx_media_event_type', 'media', ['event_id', 'media_type'], unique=False)
    op.create_index('idx_media_file_size', 'media', ['file_size'], unique=False)
    op.create_index('idx_media_is_active', 'media', ['is_active'], unique=False)
    op.create_index('idx_media_is_deleted', 'media', ['is_deleted'], unique=False)
    op.create_index('idx_media_is_featured', 'media', ['is_featured'], unique=False)
    op.create_index('idx_media_is_processed', 'media', ['is_processed'], unique=False)
    op.create_index('idx_media_is_public', 'media', ['is_public'], unique=False)
    op.create_index('idx_media_media_type', 'media', ['media_type'], unique=False)
    op.create_index('idx_media_mime_type', 'media', ['mime_type'], unique=False)
    op.create_index('idx_media_processing_status', 'media', ['processing_status'], unique=False)
    op.create_index('idx_media_type_public', 'media', ['media_type', 'is_public'], unique=False)
    op.create_index('idx_media_updated_at', 'media', ['updated_at'], unique=False)
    op.create_index('idx_media_uploader_created', 'media', ['uploader_id', 'created_at'], unique=False)
    op.create_index('idx_media_uploader_id', 'media', ['uploader_id'], unique=False)
    op.create_index('idx_media_uploader_type', 'media', ['uploader_id', 'media_type'], unique=False)
    op.create_index(op.f('ix_media_id'), 'media', ['id'], unique=False)
    op.create_table('messages',
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('message_type', sa.Enum('TEXT', 'IMAGE', 'FILE', 'SYSTEM', 'POLL_UPDATE', 'TASK_UPDATE', 'EXPENSE_UPDATE', 'RSVP_UPDATE', name='messagetype'), nullable=False),
    sa.Column('status', sa.Enum('SENT', 'DELIVERED', 'READ', 'FAILED', name='messagestatus'), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('sender_id', sa.Integer(), nullable=False),
    sa.Column('reply_to_id', sa.Integer(), nullable=True),
    sa.Column('file_url', sa.String(length=500), nullable=True),
    sa.Column('file_name', sa.String(length=255), nullable=True),
    sa.Column('file_size', sa.Integer(), nullable=True),
    sa.Column('file_type', sa.String(length=100), nullable=True),
    sa.Column('is_edited', sa.Boolean(), nullable=False),
    sa.Column('edited_at', sa.DateTime(), nullable=True),
    sa.Column('is_pinned', sa.Boolean(), nullable=False),
    sa.Column('pinned_at', sa.DateTime(), nullable=True),
    sa.Column('pinned_by_id', sa.Integer(), nullable=True),
    sa.Column('system_data', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['pinned_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['reply_to_id'], ['messages.id'], ),
    sa.ForeignKeyConstraint(['sender_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_message_created_at', 'messages', ['created_at'], unique=False)
    op.create_index('idx_message_edited_at', 'messages', ['edited_at'], unique=False)
    op.create_index('idx_message_event_created', 'messages', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_message_event_id', 'messages', ['event_id'], unique=False)
    op.create_index('idx_message_event_pinned', 'messages', ['event_id', 'is_pinned'], unique=False)
    op.create_index('idx_message_event_type', 'messages', ['event_id', 'message_type'], unique=False)
    op.create_index('idx_message_is_edited', 'messages', ['is_edited'], unique=False)
    op.create_index('idx_message_is_pinned', 'messages', ['is_pinned'], unique=False)
    op.create_index('idx_message_message_type', 'messages', ['message_type'], unique=False)
    op.create_index('idx_message_pinned_at', 'messages', ['pinned_at'], unique=False)
    op.create_index('idx_message_pinned_by_id', 'messages', ['pinned_by_id'], unique=False)
    op.create_index('idx_message_reply_created', 'messages', ['reply_to_id', 'created_at'], unique=False)
    op.create_index('idx_message_reply_to_id', 'messages', ['reply_to_id'], unique=False)
    op.create_index('idx_message_sender_created', 'messages', ['sender_id', 'created_at'], unique=False)
    op.create_index('idx_message_sender_id', 'messages', ['sender_id'], unique=False)
    op.create_index('idx_message_status', 'messages', ['status'], unique=False)
    op.create_index(op.f('ix_messages_id'), 'messages', ['id'], unique=False)
    op.create_table('moodboards',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('moodboard_type', sa.Enum('DECORATIONS', 'FOOD', 'THEMES', 'COLORS', 'VENUES', 'OUTFITS', 'GENERAL', name='moodboardtype'), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('allow_contributions', sa.Boolean(), nullable=False),
    sa.Column('tags', sa.Text(), nullable=True),
    sa.Column('color_palette', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_moodboard_allow_contributions', 'moodboards', ['allow_contributions'], unique=False)
    op.create_index('idx_moodboard_created_at', 'moodboards', ['created_at'], unique=False)
    op.create_index('idx_moodboard_creator_id', 'moodboards', ['creator_id'], unique=False)
    op.create_index('idx_moodboard_creator_type', 'moodboards', ['creator_id', 'moodboard_type'], unique=False)
    op.create_index('idx_moodboard_event_created', 'moodboards', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_moodboard_event_id', 'moodboards', ['event_id'], unique=False)
    op.create_index('idx_moodboard_event_public', 'moodboards', ['event_id', 'is_public'], unique=False)
    op.create_index('idx_moodboard_is_public', 'moodboards', ['is_public'], unique=False)
    op.create_index('idx_moodboard_type', 'moodboards', ['moodboard_type'], unique=False)
    op.create_index('idx_moodboard_type_public', 'moodboards', ['moodboard_type', 'is_public'], unique=False)
    op.create_index('idx_moodboard_updated_at', 'moodboards', ['updated_at'], unique=False)
    op.create_index(op.f('ix_moodboards_id'), 'moodboards', ['id'], unique=False)
    op.create_table('playlists',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('provider', sa.Enum('SPOTIFY', 'CUSTOM', name='playlistprovider'), nullable=False),
    sa.Column('external_id', sa.String(length=200), nullable=True),
    sa.Column('external_url', sa.String(length=500), nullable=True),
    sa.Column('is_collaborative', sa.Boolean(), nullable=False),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('allow_duplicates', sa.Boolean(), nullable=False),
    sa.Column('total_duration_seconds', sa.Integer(), nullable=True),
    sa.Column('genre_tags', sa.Text(), nullable=True),
    sa.Column('mood_tags', sa.Text(), nullable=True),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_playlist_created_at', 'playlists', ['created_at'], unique=False)
    op.create_index('idx_playlist_creator_id', 'playlists', ['creator_id'], unique=False)
    op.create_index('idx_playlist_creator_provider', 'playlists', ['creator_id', 'provider'], unique=False)
    op.create_index('idx_playlist_event_collaborative', 'playlists', ['event_id', 'is_collaborative'], unique=False)
    op.create_index('idx_playlist_event_id', 'playlists', ['event_id'], unique=False)
    op.create_index('idx_playlist_event_public', 'playlists', ['event_id', 'is_public'], unique=False)
    op.create_index('idx_playlist_is_collaborative', 'playlists', ['is_collaborative'], unique=False)
    op.create_index('idx_playlist_is_public', 'playlists', ['is_public'], unique=False)
    op.create_index('idx_playlist_provider', 'playlists', ['provider'], unique=False)
    op.create_index('idx_playlist_provider_public', 'playlists', ['provider', 'is_public'], unique=False)
    op.create_index('idx_playlist_updated_at', 'playlists', ['updated_at'], unique=False)
    op.create_index(op.f('ix_playlists_id'), 'playlists', ['id'], unique=False)
    op.create_table('polls',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('multiple_choice', sa.Boolean(), nullable=False),
    sa.Column('anonymous', sa.Boolean(), nullable=False),
    sa.Column('closes_at', sa.DateTime(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_poll_closes_at', 'polls', ['closes_at'], unique=False)
    op.create_index('idx_poll_created_at', 'polls', ['created_at'], unique=False)
    op.create_index('idx_poll_creator_created', 'polls', ['creator_id', 'created_at'], unique=False)
    op.create_index('idx_poll_creator_id', 'polls', ['creator_id'], unique=False)
    op.create_index('idx_poll_event_created', 'polls', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_poll_event_id', 'polls', ['event_id'], unique=False)
    op.create_index('idx_poll_is_deleted', 'polls', ['is_deleted'], unique=False)
    op.create_index(op.f('ix_polls_id'), 'polls', ['id'], unique=False)
    op.create_table('smart_reminders',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('scheduled_time', sa.DateTime(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=True),
    sa.Column('frequency', sa.Enum('ONCE', 'DAILY', 'WEEKLY', 'CUSTOM', name='reminderfrequency'), nullable=False),
    sa.Column('recurrence_count', sa.Integer(), nullable=False),
    sa.Column('recurrence_sent', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('PENDING', 'SENT', 'FAILED', 'CANCELLED', name='notificationstatus'), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('auto_generated', sa.Boolean(), nullable=False),
    sa.Column('send_email', sa.Boolean(), nullable=False),
    sa.Column('send_sms', sa.Boolean(), nullable=False),
    sa.Column('send_push', sa.Boolean(), nullable=False),
    sa.Column('send_in_app', sa.Boolean(), nullable=False),
    sa.Column('target_all_guests', sa.Boolean(), nullable=False),
    sa.Column('target_specific_users', sa.Text(), nullable=True),
    sa.Column('target_rsvp_status', sa.String(length=20), nullable=True),
    sa.Column('conditions', sa.Text(), nullable=True),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_smartreminder_active_scheduled', 'smart_reminders', ['is_active', 'scheduled_time'], unique=False)
    op.create_index('idx_smartreminder_created_at', 'smart_reminders', ['created_at'], unique=False)
    op.create_index('idx_smartreminder_creator_active', 'smart_reminders', ['creator_id', 'is_active'], unique=False)
    op.create_index('idx_smartreminder_creator_id', 'smart_reminders', ['creator_id'], unique=False)
    op.create_index('idx_smartreminder_event_id', 'smart_reminders', ['event_id'], unique=False)
    op.create_index('idx_smartreminder_event_status', 'smart_reminders', ['event_id', 'status'], unique=False)
    op.create_index('idx_smartreminder_frequency', 'smart_reminders', ['frequency'], unique=False)
    op.create_index('idx_smartreminder_is_active', 'smart_reminders', ['is_active'], unique=False)
    op.create_index('idx_smartreminder_notification_type', 'smart_reminders', ['notification_type'], unique=False)
    op.create_index('idx_smartreminder_scheduled_time', 'smart_reminders', ['scheduled_time'], unique=False)
    op.create_index('idx_smartreminder_status', 'smart_reminders', ['status'], unique=False)
    op.create_index('idx_smartreminder_type_status', 'smart_reminders', ['notification_type', 'status'], unique=False)
    op.create_index(op.f('ix_smart_reminders_id'), 'smart_reminders', ['id'], unique=False)
    op.create_table('subscription_payments',
    sa.Column('subscription_id', sa.Integer(), nullable=False),
    sa.Column('amount', sa.Float(), nullable=False),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('status', sa.Enum('PENDING', 'SUCCEEDED', 'FAILED', 'CANCELED', 'REFUNDED', name='paymentstatus'), nullable=False),
    sa.Column('stripe_payment_intent_id', sa.String(length=100), nullable=True),
    sa.Column('stripe_invoice_id', sa.String(length=100), nullable=True),
    sa.Column('billing_reason', sa.String(length=50), nullable=True),
    sa.Column('payment_method_type', sa.String(length=50), nullable=True),
    sa.Column('paid_at', sa.DateTime(), nullable=True),
    sa.Column('failed_at', sa.DateTime(), nullable=True),
    sa.Column('refunded_at', sa.DateTime(), nullable=True),
    sa.Column('failure_code', sa.String(length=50), nullable=True),
    sa.Column('failure_message', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['subscription_id'], ['user_subscriptions.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_payment_amount', 'subscription_payments', ['amount'], unique=False)
    op.create_index('idx_payment_dates', 'subscription_payments', ['paid_at'], unique=False)
    op.create_index('idx_payment_status', 'subscription_payments', ['status'], unique=False)
    op.create_index('idx_payment_subscription', 'subscription_payments', ['subscription_id'], unique=False)
    op.create_index('idx_stripe_invoice', 'subscription_payments', ['stripe_invoice_id'], unique=False)
    op.create_index('idx_stripe_payment_intent', 'subscription_payments', ['stripe_payment_intent_id'], unique=False)
    op.create_index(op.f('ix_subscription_payments_id'), 'subscription_payments', ['id'], unique=False)
    op.create_table('tasks',
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('creator_id', sa.Integer(), nullable=False),
    sa.Column('assignee_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('due_date', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('estimated_cost', sa.Float(), nullable=True),
    sa.Column('actual_cost', sa.Float(), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assignee_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['creator_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_task_assignee_id', 'tasks', ['assignee_id'], unique=False)
    op.create_index('idx_task_assignee_status', 'tasks', ['assignee_id', 'status'], unique=False)
    op.create_index('idx_task_category', 'tasks', ['category'], unique=False)
    op.create_index('idx_task_completed_at', 'tasks', ['completed_at'], unique=False)
    op.create_index('idx_task_creator_id', 'tasks', ['creator_id'], unique=False)
    op.create_index('idx_task_due_date', 'tasks', ['due_date'], unique=False)
    op.create_index('idx_task_due_status', 'tasks', ['due_date', 'status'], unique=False)
    op.create_index('idx_task_event_id', 'tasks', ['event_id'], unique=False)
    op.create_index('idx_task_event_status', 'tasks', ['event_id', 'status'], unique=False)
    op.create_index('idx_task_is_deleted', 'tasks', ['is_deleted'], unique=False)
    op.create_index('idx_task_priority', 'tasks', ['priority'], unique=False)
    op.create_index('idx_task_priority_status', 'tasks', ['priority', 'status'], unique=False)
    op.create_index('idx_task_status', 'tasks', ['status'], unique=False)
    op.create_index(op.f('ix_tasks_id'), 'tasks', ['id'], unique=False)
    op.create_table('vendor_availability',
    sa.Column('date', sa.DateTime(), nullable=False),
    sa.Column('start_time', sa.String(length=5), nullable=True),
    sa.Column('end_time', sa.String(length=5), nullable=True),
    sa.Column('is_available', sa.Boolean(), nullable=False),
    sa.Column('is_blocked', sa.Boolean(), nullable=False),
    sa.Column('block_reason', sa.String(length=200), nullable=True),
    sa.Column('price_multiplier', sa.Float(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vendor_availability_id'), 'vendor_availability', ['id'], unique=False)
    op.create_table('vendor_portfolio',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('image_url', sa.String(length=500), nullable=False),
    sa.Column('thumbnail_url', sa.String(length=500), nullable=True),
    sa.Column('event_type', sa.String(length=100), nullable=True),
    sa.Column('event_date', sa.DateTime(), nullable=True),
    sa.Column('guest_count', sa.Integer(), nullable=True),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('display_order', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vendor_portfolio_id'), 'vendor_portfolio', ['id'], unique=False)
    op.create_table('vendor_services',
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('base_price', sa.Float(), nullable=False),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('service_type', sa.Enum('HOURLY', 'FIXED_PRICE', 'PACKAGE', 'CUSTOM_QUOTE', name='servicetype'), nullable=False),
    sa.Column('duration_hours', sa.Integer(), nullable=True),
    sa.Column('max_guests', sa.Integer(), nullable=True),
    sa.Column('includes', sa.Text(), nullable=True),
    sa.Column('excludes', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('seasonal_availability', sa.Text(), nullable=True),
    sa.Column('advance_booking_days', sa.Integer(), nullable=False),
    sa.Column('cancellation_policy', sa.Text(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vendor_services_id'), 'vendor_services', ['id'], unique=False)
    op.create_table('ai_chat_messages',
    sa.Column('role', sa.Enum('USER', 'ASSISTANT', 'SYSTEM', name='chatmessagerole'), nullable=False),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('extra_data', sa.Text(), nullable=True),
    sa.Column('suggestions', sa.Text(), nullable=True),
    sa.Column('event_preview', sa.Text(), nullable=True),
    sa.Column('session_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['session_id'], ['ai_chat_sessions.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ai_chat_message_created_at', 'ai_chat_messages', ['created_at'], unique=False)
    op.create_index('idx_ai_chat_message_role', 'ai_chat_messages', ['role'], unique=False)
    op.create_index('idx_ai_chat_message_role_created', 'ai_chat_messages', ['role', 'created_at'], unique=False)
    op.create_index('idx_ai_chat_message_session_created', 'ai_chat_messages', ['session_id', 'created_at'], unique=False)
    op.create_index('idx_ai_chat_message_session_id', 'ai_chat_messages', ['session_id'], unique=False)
    op.create_index('idx_ai_chat_message_session_role', 'ai_chat_messages', ['session_id', 'role'], unique=False)
    op.create_index('idx_ai_chat_message_updated_at', 'ai_chat_messages', ['updated_at'], unique=False)
    op.create_index(op.f('ix_ai_chat_messages_id'), 'ai_chat_messages', ['id'], unique=False)
    op.create_table('chat_participants',
    sa.Column('is_muted', sa.Boolean(), nullable=False),
    sa.Column('muted_until', sa.DateTime(), nullable=True),
    sa.Column('last_read_message_id', sa.Integer(), nullable=True),
    sa.Column('last_seen_at', sa.DateTime(), nullable=True),
    sa.Column('email_notifications', sa.Boolean(), nullable=False),
    sa.Column('push_notifications', sa.Boolean(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['last_read_message_id'], ['messages.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_chatparticipant_created_at', 'chat_participants', ['created_at'], unique=False)
    op.create_index('idx_chatparticipant_email_notifications', 'chat_participants', ['email_notifications'], unique=False)
    op.create_index('idx_chatparticipant_event_id', 'chat_participants', ['event_id'], unique=False)
    op.create_index('idx_chatparticipant_event_muted', 'chat_participants', ['event_id', 'is_muted'], unique=False)
    op.create_index('idx_chatparticipant_event_user', 'chat_participants', ['event_id', 'user_id'], unique=False)
    op.create_index('idx_chatparticipant_is_muted', 'chat_participants', ['is_muted'], unique=False)
    op.create_index('idx_chatparticipant_last_read_message_id', 'chat_participants', ['last_read_message_id'], unique=False)
    op.create_index('idx_chatparticipant_last_seen_at', 'chat_participants', ['last_seen_at'], unique=False)
    op.create_index('idx_chatparticipant_muted_until', 'chat_participants', ['muted_until'], unique=False)
    op.create_index('idx_chatparticipant_push_notifications', 'chat_participants', ['push_notifications'], unique=False)
    op.create_index('idx_chatparticipant_user_id', 'chat_participants', ['user_id'], unique=False)
    op.create_index('idx_chatparticipant_user_last_seen', 'chat_participants', ['user_id', 'last_seen_at'], unique=False)
    op.create_index(op.f('ix_chat_participants_id'), 'chat_participants', ['id'], unique=False)
    op.create_table('expense_splits',
    sa.Column('expense_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('amount_owed', sa.Float(), nullable=False),
    sa.Column('is_paid', sa.Boolean(), nullable=False),
    sa.Column('paid_at', sa.DateTime(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['expense_id'], ['expenses.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_expense_splits_id'), 'expense_splits', ['id'], unique=False)
    op.create_table('game_ratings',
    sa.Column('rating', sa.Integer(), nullable=False),
    sa.Column('review', sa.Text(), nullable=True),
    sa.Column('game_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['game_id'], ['games.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_game_rating_created_at', 'game_ratings', ['created_at'], unique=False)
    op.create_index('idx_game_rating_game_created', 'game_ratings', ['game_id', 'created_at'], unique=False)
    op.create_index('idx_game_rating_game_id', 'game_ratings', ['game_id'], unique=False)
    op.create_index('idx_game_rating_game_rating', 'game_ratings', ['game_id', 'rating'], unique=False)
    op.create_index('idx_game_rating_game_user', 'game_ratings', ['game_id', 'user_id'], unique=False)
    op.create_index('idx_game_rating_rating', 'game_ratings', ['rating'], unique=False)
    op.create_index('idx_game_rating_user_id', 'game_ratings', ['user_id'], unique=False)
    op.create_index('idx_game_rating_user_rating', 'game_ratings', ['user_id', 'rating'], unique=False)
    op.create_index(op.f('ix_game_ratings_id'), 'game_ratings', ['id'], unique=False)
    op.create_table('game_sessions',
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('start_time', sa.DateTime(), nullable=True),
    sa.Column('end_time', sa.DateTime(), nullable=True),
    sa.Column('current_round', sa.Integer(), nullable=False),
    sa.Column('total_rounds', sa.Integer(), nullable=True),
    sa.Column('session_data', sa.Text(), nullable=True),
    sa.Column('max_participants', sa.Integer(), nullable=True),
    sa.Column('game_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('host_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['game_id'], ['games.id'], ),
    sa.ForeignKeyConstraint(['host_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_game_session_created_at', 'game_sessions', ['created_at'], unique=False)
    op.create_index('idx_game_session_current_round', 'game_sessions', ['current_round'], unique=False)
    op.create_index('idx_game_session_end_time', 'game_sessions', ['end_time'], unique=False)
    op.create_index('idx_game_session_event_id', 'game_sessions', ['event_id'], unique=False)
    op.create_index('idx_game_session_event_status', 'game_sessions', ['event_id', 'status'], unique=False)
    op.create_index('idx_game_session_game_created', 'game_sessions', ['game_id', 'created_at'], unique=False)
    op.create_index('idx_game_session_game_id', 'game_sessions', ['game_id'], unique=False)
    op.create_index('idx_game_session_game_status', 'game_sessions', ['game_id', 'status'], unique=False)
    op.create_index('idx_game_session_host_id', 'game_sessions', ['host_id'], unique=False)
    op.create_index('idx_game_session_host_status', 'game_sessions', ['host_id', 'status'], unique=False)
    op.create_index('idx_game_session_start_time', 'game_sessions', ['start_time'], unique=False)
    op.create_index('idx_game_session_status', 'game_sessions', ['status'], unique=False)
    op.create_index(op.f('ix_game_sessions_id'), 'game_sessions', ['id'], unique=False)
    op.create_table('media_collections',
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('cover_media_id', sa.Integer(), nullable=True),
    sa.Column('owner_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['cover_media_id'], ['media.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_mediacollection_cover_media_id', 'media_collections', ['cover_media_id'], unique=False)
    op.create_index('idx_mediacollection_created_at', 'media_collections', ['created_at'], unique=False)
    op.create_index('idx_mediacollection_event_created', 'media_collections', ['event_id', 'created_at'], unique=False)
    op.create_index('idx_mediacollection_event_id', 'media_collections', ['event_id'], unique=False)
    op.create_index('idx_mediacollection_event_public', 'media_collections', ['event_id', 'is_public'], unique=False)
    op.create_index('idx_mediacollection_is_deleted', 'media_collections', ['is_deleted'], unique=False)
    op.create_index('idx_mediacollection_is_public', 'media_collections', ['is_public'], unique=False)
    op.create_index('idx_mediacollection_owner_created', 'media_collections', ['owner_id', 'created_at'], unique=False)
    op.create_index('idx_mediacollection_owner_id', 'media_collections', ['owner_id'], unique=False)
    op.create_index('idx_mediacollection_owner_public', 'media_collections', ['owner_id', 'is_public'], unique=False)
    op.create_index('idx_mediacollection_updated_at', 'media_collections', ['updated_at'], unique=False)
    op.create_index(op.f('ix_media_collections_id'), 'media_collections', ['id'], unique=False)
    op.create_table('media_comments',
    sa.Column('media_id', sa.Integer(), nullable=False),
    sa.Column('author_id', sa.Integer(), nullable=False),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['author_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['media_id'], ['media.id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['media_comments.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_mediacomment_author_created', 'media_comments', ['author_id', 'created_at'], unique=False)
    op.create_index('idx_mediacomment_author_id', 'media_comments', ['author_id'], unique=False)
    op.create_index('idx_mediacomment_created_at', 'media_comments', ['created_at'], unique=False)
    op.create_index('idx_mediacomment_is_deleted', 'media_comments', ['is_deleted'], unique=False)
    op.create_index('idx_mediacomment_media_created', 'media_comments', ['media_id', 'created_at'], unique=False)
    op.create_index('idx_mediacomment_media_deleted', 'media_comments', ['media_id', 'is_deleted'], unique=False)
    op.create_index('idx_mediacomment_media_id', 'media_comments', ['media_id'], unique=False)
    op.create_index('idx_mediacomment_parent_created', 'media_comments', ['parent_id', 'created_at'], unique=False)
    op.create_index('idx_mediacomment_parent_id', 'media_comments', ['parent_id'], unique=False)
    op.create_index('idx_mediacomment_updated_at', 'media_comments', ['updated_at'], unique=False)
    op.create_index(op.f('ix_media_comments_id'), 'media_comments', ['id'], unique=False)
    op.create_table('media_likes',
    sa.Column('media_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('reaction_type', sa.String(length=20), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['media_id'], ['media.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_medialike_created_at', 'media_likes', ['created_at'], unique=False)
    op.create_index('idx_medialike_media_id', 'media_likes', ['media_id'], unique=False)
    op.create_index('idx_medialike_media_reaction', 'media_likes', ['media_id', 'reaction_type'], unique=False)
    op.create_index('idx_medialike_media_user', 'media_likes', ['media_id', 'user_id'], unique=False)
    op.create_index('idx_medialike_reaction_type', 'media_likes', ['reaction_type'], unique=False)
    op.create_index('idx_medialike_user_id', 'media_likes', ['user_id'], unique=False)
    op.create_index('idx_medialike_user_reaction', 'media_likes', ['user_id', 'reaction_type'], unique=False)
    op.create_index(op.f('ix_media_likes_id'), 'media_likes', ['id'], unique=False)
    op.create_table('media_shares',
    sa.Column('media_id', sa.Integer(), nullable=False),
    sa.Column('shared_with_user_id', sa.Integer(), nullable=False),
    sa.Column('shared_by_user_id', sa.Integer(), nullable=False),
    sa.Column('can_download', sa.Boolean(), nullable=False),
    sa.Column('can_reshare', sa.Boolean(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('share_message', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['media_id'], ['media.id'], ),
    sa.ForeignKeyConstraint(['shared_by_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['shared_with_user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_mediashare_can_download', 'media_shares', ['can_download'], unique=False)
    op.create_index('idx_mediashare_can_reshare', 'media_shares', ['can_reshare'], unique=False)
    op.create_index('idx_mediashare_created_at', 'media_shares', ['created_at'], unique=False)
    op.create_index('idx_mediashare_expires_at', 'media_shares', ['expires_at'], unique=False)
    op.create_index('idx_mediashare_media_id', 'media_shares', ['media_id'], unique=False)
    op.create_index('idx_mediashare_media_shared_with', 'media_shares', ['media_id', 'shared_with_user_id'], unique=False)
    op.create_index('idx_mediashare_shared_by_created', 'media_shares', ['shared_by_user_id', 'created_at'], unique=False)
    op.create_index('idx_mediashare_shared_by_user_id', 'media_shares', ['shared_by_user_id'], unique=False)
    op.create_index('idx_mediashare_shared_with_created', 'media_shares', ['shared_with_user_id', 'created_at'], unique=False)
    op.create_index('idx_mediashare_shared_with_user_id', 'media_shares', ['shared_with_user_id'], unique=False)
    op.create_index(op.f('ix_media_shares_id'), 'media_shares', ['id'], unique=False)
    op.create_table('media_tags',
    sa.Column('media_id', sa.Integer(), nullable=False),
    sa.Column('tag_name', sa.String(length=100), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['media_id'], ['media.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_mediatag_created_at', 'media_tags', ['created_at'], unique=False)
    op.create_index('idx_mediatag_media_id', 'media_tags', ['media_id'], unique=False)
    op.create_index('idx_mediatag_media_tag', 'media_tags', ['media_id', 'tag_name'], unique=False)
    op.create_index('idx_mediatag_tag_name', 'media_tags', ['tag_name'], unique=False)
    op.create_index(op.f('ix_media_tags_id'), 'media_tags', ['id'], unique=False)
    op.create_table('message_mentions',
    sa.Column('start_index', sa.Integer(), nullable=False),
    sa.Column('end_index', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('mentioned_user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['mentioned_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['message_id'], ['messages.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_messagemention_created_at', 'message_mentions', ['created_at'], unique=False)
    op.create_index('idx_messagemention_end_index', 'message_mentions', ['end_index'], unique=False)
    op.create_index('idx_messagemention_mentioned_user_id', 'message_mentions', ['mentioned_user_id'], unique=False)
    op.create_index('idx_messagemention_message_id', 'message_mentions', ['message_id'], unique=False)
    op.create_index('idx_messagemention_message_user', 'message_mentions', ['message_id', 'mentioned_user_id'], unique=False)
    op.create_index('idx_messagemention_start_index', 'message_mentions', ['start_index'], unique=False)
    op.create_index('idx_messagemention_user_created', 'message_mentions', ['mentioned_user_id', 'created_at'], unique=False)
    op.create_index(op.f('ix_message_mentions_id'), 'message_mentions', ['id'], unique=False)
    op.create_table('message_reactions',
    sa.Column('emoji', sa.String(length=10), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['message_id'], ['messages.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_messagereaction_created_at', 'message_reactions', ['created_at'], unique=False)
    op.create_index('idx_messagereaction_emoji', 'message_reactions', ['emoji'], unique=False)
    op.create_index('idx_messagereaction_message_emoji', 'message_reactions', ['message_id', 'emoji'], unique=False)
    op.create_index('idx_messagereaction_message_id', 'message_reactions', ['message_id'], unique=False)
    op.create_index('idx_messagereaction_message_user', 'message_reactions', ['message_id', 'user_id'], unique=False)
    op.create_index('idx_messagereaction_user_emoji', 'message_reactions', ['user_id', 'emoji'], unique=False)
    op.create_index('idx_messagereaction_user_id', 'message_reactions', ['user_id'], unique=False)
    op.create_index(op.f('ix_message_reactions_id'), 'message_reactions', ['id'], unique=False)
    op.create_table('message_read_receipts',
    sa.Column('read_at', sa.DateTime(), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['message_id'], ['messages.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_messagereadreceipt_created_at', 'message_read_receipts', ['created_at'], unique=False)
    op.create_index('idx_messagereadreceipt_message_id', 'message_read_receipts', ['message_id'], unique=False)
    op.create_index('idx_messagereadreceipt_message_read', 'message_read_receipts', ['message_id', 'read_at'], unique=False)
    op.create_index('idx_messagereadreceipt_message_user', 'message_read_receipts', ['message_id', 'user_id'], unique=False)
    op.create_index('idx_messagereadreceipt_read_at', 'message_read_receipts', ['read_at'], unique=False)
    op.create_index('idx_messagereadreceipt_user_id', 'message_read_receipts', ['user_id'], unique=False)
    op.create_index('idx_messagereadreceipt_user_read', 'message_read_receipts', ['user_id', 'read_at'], unique=False)
    op.create_index(op.f('ix_message_read_receipts_id'), 'message_read_receipts', ['id'], unique=False)
    op.create_table('moodboard_comments',
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('moodboard_id', sa.Integer(), nullable=False),
    sa.Column('author_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['author_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['moodboard_id'], ['moodboards.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_moodboard_comment_author_created', 'moodboard_comments', ['author_id', 'created_at'], unique=False)
    op.create_index('idx_moodboard_comment_author_id', 'moodboard_comments', ['author_id'], unique=False)
    op.create_index('idx_moodboard_comment_board_created', 'moodboard_comments', ['moodboard_id', 'created_at'], unique=False)
    op.create_index('idx_moodboard_comment_created_at', 'moodboard_comments', ['created_at'], unique=False)
    op.create_index('idx_moodboard_comment_moodboard_id', 'moodboard_comments', ['moodboard_id'], unique=False)
    op.create_index('idx_moodboard_comment_updated_at', 'moodboard_comments', ['updated_at'], unique=False)
    op.create_index(op.f('ix_moodboard_comments_id'), 'moodboard_comments', ['id'], unique=False)
    op.create_table('moodboard_items',
    sa.Column('title', sa.String(length=200), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('image_url', sa.String(length=500), nullable=True),
    sa.Column('source_url', sa.String(length=500), nullable=True),
    sa.Column('content_type', sa.String(length=50), nullable=False),
    sa.Column('position_x', sa.Integer(), nullable=True),
    sa.Column('position_y', sa.Integer(), nullable=True),
    sa.Column('width', sa.Integer(), nullable=True),
    sa.Column('height', sa.Integer(), nullable=True),
    sa.Column('tags', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('price_estimate', sa.String(length=50), nullable=True),
    sa.Column('vendor_info', sa.Text(), nullable=True),
    sa.Column('moodboard_id', sa.Integer(), nullable=False),
    sa.Column('added_by_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['added_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['moodboard_id'], ['moodboards.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_moodboard_item_added_by_id', 'moodboard_items', ['added_by_id'], unique=False)
    op.create_index('idx_moodboard_item_board_created', 'moodboard_items', ['moodboard_id', 'created_at'], unique=False)
    op.create_index('idx_moodboard_item_board_type', 'moodboard_items', ['moodboard_id', 'content_type'], unique=False)
    op.create_index('idx_moodboard_item_content_type', 'moodboard_items', ['content_type'], unique=False)
    op.create_index('idx_moodboard_item_created_at', 'moodboard_items', ['created_at'], unique=False)
    op.create_index('idx_moodboard_item_moodboard_id', 'moodboard_items', ['moodboard_id'], unique=False)
    op.create_index('idx_moodboard_item_updated_at', 'moodboard_items', ['updated_at'], unique=False)
    op.create_index('idx_moodboard_item_user_created', 'moodboard_items', ['added_by_id', 'created_at'], unique=False)
    op.create_index(op.f('ix_moodboard_items_id'), 'moodboard_items', ['id'], unique=False)
    op.create_table('moodboard_likes',
    sa.Column('moodboard_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['moodboard_id'], ['moodboards.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_moodboard_like_board_user', 'moodboard_likes', ['moodboard_id', 'user_id'], unique=False)
    op.create_index('idx_moodboard_like_created_at', 'moodboard_likes', ['created_at'], unique=False)
    op.create_index('idx_moodboard_like_moodboard_id', 'moodboard_likes', ['moodboard_id'], unique=False)
    op.create_index('idx_moodboard_like_user_created', 'moodboard_likes', ['user_id', 'created_at'], unique=False)
    op.create_index('idx_moodboard_like_user_id', 'moodboard_likes', ['user_id'], unique=False)
    op.create_index(op.f('ix_moodboard_likes_id'), 'moodboard_likes', ['id'], unique=False)
    op.create_table('notification_logs',
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('channel', sa.Enum('EMAIL', 'SMS', 'PUSH', 'IN_APP', name='notificationchannel'), nullable=False),
    sa.Column('subject', sa.String(length=200), nullable=True),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=False),
    sa.Column('delivered_at', sa.DateTime(), nullable=True),
    sa.Column('read_at', sa.DateTime(), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'SENT', 'FAILED', 'CANCELLED', name='notificationstatus'), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('extra_data', sa.Text(), nullable=True),
    sa.Column('reminder_id', sa.Integer(), nullable=True),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('recipient_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['recipient_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['reminder_id'], ['smart_reminders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_notificationlog_channel', 'notification_logs', ['channel'], unique=False)
    op.create_index('idx_notificationlog_channel_status', 'notification_logs', ['channel', 'status'], unique=False)
    op.create_index('idx_notificationlog_created_at', 'notification_logs', ['created_at'], unique=False)
    op.create_index('idx_notificationlog_delivered_at', 'notification_logs', ['delivered_at'], unique=False)
    op.create_index('idx_notificationlog_event_id', 'notification_logs', ['event_id'], unique=False)
    op.create_index('idx_notificationlog_event_status', 'notification_logs', ['event_id', 'status'], unique=False)
    op.create_index('idx_notificationlog_notification_type', 'notification_logs', ['notification_type'], unique=False)
    op.create_index('idx_notificationlog_read_at', 'notification_logs', ['read_at'], unique=False)
    op.create_index('idx_notificationlog_recipient_id', 'notification_logs', ['recipient_id'], unique=False)
    op.create_index('idx_notificationlog_recipient_sent', 'notification_logs', ['recipient_id', 'sent_at'], unique=False)
    op.create_index('idx_notificationlog_recipient_type', 'notification_logs', ['recipient_id', 'notification_type'], unique=False)
    op.create_index('idx_notificationlog_reminder_id', 'notification_logs', ['reminder_id'], unique=False)
    op.create_index('idx_notificationlog_sent_at', 'notification_logs', ['sent_at'], unique=False)
    op.create_index('idx_notificationlog_status', 'notification_logs', ['status'], unique=False)
    op.create_index(op.f('ix_notification_logs_id'), 'notification_logs', ['id'], unique=False)
    op.create_table('notification_queue',
    sa.Column('notification_type', sa.Enum('RSVP_REMINDER', 'PAYMENT_REMINDER', 'DRESS_CODE_REMINDER', 'EVENT_REMINDER', 'TASK_REMINDER', 'TIMELINE_REMINDER', 'WEATHER_ALERT', 'BUDGET_ALERT', 'EVENT_INVITE', 'FRIEND_REQUEST', 'FRIEND_REQUEST_ACCEPTED', 'GROUP_INVITE', 'GROUP_JOIN_REQUEST', 'SOCIAL_NOTIFICATION', 'SYSTEM_ANNOUNCEMENT', 'ACCOUNT_UPDATE', 'SECURITY_ALERT', 'CUSTOM', name='notificationtype'), nullable=False),
    sa.Column('channel', sa.Enum('EMAIL', 'SMS', 'PUSH', 'IN_APP', name='notificationchannel'), nullable=False),
    sa.Column('subject', sa.String(length=200), nullable=True),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('scheduled_for', sa.DateTime(), nullable=False),
    sa.Column('priority', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('attempts', sa.Integer(), nullable=False),
    sa.Column('max_attempts', sa.Integer(), nullable=False),
    sa.Column('last_attempt_at', sa.DateTime(), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('extra_data', sa.Text(), nullable=True),
    sa.Column('reminder_id', sa.Integer(), nullable=True),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('recipient_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['recipient_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['reminder_id'], ['smart_reminders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_notification_queue_id'), 'notification_queue', ['id'], unique=False)
    op.create_table('playlist_tracks',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('artist', sa.String(length=200), nullable=False),
    sa.Column('album', sa.String(length=200), nullable=True),
    sa.Column('duration_seconds', sa.Integer(), nullable=True),
    sa.Column('spotify_id', sa.String(length=100), nullable=True),
    sa.Column('genre', sa.String(length=100), nullable=True),
    sa.Column('year', sa.Integer(), nullable=True),
    sa.Column('explicit', sa.Boolean(), nullable=False),
    sa.Column('position', sa.Integer(), nullable=False),
    sa.Column('playlist_id', sa.Integer(), nullable=False),
    sa.Column('added_by_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['added_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['playlist_id'], ['playlists.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_playlist_track_added_by_id', 'playlist_tracks', ['added_by_id'], unique=False)
    op.create_index('idx_playlist_track_created_at', 'playlist_tracks', ['created_at'], unique=False)
    op.create_index('idx_playlist_track_explicit', 'playlist_tracks', ['explicit'], unique=False)
    op.create_index('idx_playlist_track_genre', 'playlist_tracks', ['genre'], unique=False)
    op.create_index('idx_playlist_track_genre_year', 'playlist_tracks', ['genre', 'year'], unique=False)
    op.create_index('idx_playlist_track_playlist_created', 'playlist_tracks', ['playlist_id', 'created_at'], unique=False)
    op.create_index('idx_playlist_track_playlist_id', 'playlist_tracks', ['playlist_id'], unique=False)
    op.create_index('idx_playlist_track_playlist_position', 'playlist_tracks', ['playlist_id', 'position'], unique=False)
    op.create_index('idx_playlist_track_position', 'playlist_tracks', ['position'], unique=False)
    op.create_index('idx_playlist_track_user_created', 'playlist_tracks', ['added_by_id', 'created_at'], unique=False)
    op.create_index('idx_playlist_track_year', 'playlist_tracks', ['year'], unique=False)
    op.create_index(op.f('ix_playlist_tracks_id'), 'playlist_tracks', ['id'], unique=False)
    op.create_table('poll_options',
    sa.Column('poll_id', sa.Integer(), nullable=False),
    sa.Column('text', sa.String(length=255), nullable=False),
    sa.Column('order_index', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['poll_id'], ['polls.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_poll_options_id'), 'poll_options', ['id'], unique=False)
    op.create_table('timeline_items',
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('item_type', sa.Enum('SETUP', 'ARRIVAL', 'ACTIVITY', 'MEAL', 'ENTERTAINMENT', 'SPEECH', 'CEREMONY', 'BREAK', 'CLEANUP', 'DEPARTURE', 'CUSTOM', name='timelineitemtype'), nullable=False),
    sa.Column('start_time', sa.Time(), nullable=False),
    sa.Column('end_time', sa.Time(), nullable=True),
    sa.Column('duration_minutes', sa.Integer(), nullable=False),
    sa.Column('buffer_minutes', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('PENDING', 'IN_PROGRESS', 'COMPLETED', 'SKIPPED', 'DELAYED', name='timelinestatus'), nullable=False),
    sa.Column('actual_start_time', sa.Time(), nullable=True),
    sa.Column('actual_end_time', sa.Time(), nullable=True),
    sa.Column('order_index', sa.Integer(), nullable=False),
    sa.Column('is_critical', sa.Boolean(), nullable=False),
    sa.Column('is_flexible', sa.Boolean(), nullable=False),
    sa.Column('requirements', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('location', sa.String(length=200), nullable=True),
    sa.Column('timeline_id', sa.Integer(), nullable=False),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['timeline_id'], ['event_timelines.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timeline_item_assigned_status', 'timeline_items', ['assigned_to_id', 'status'], unique=False)
    op.create_index('idx_timeline_item_assigned_to_id', 'timeline_items', ['assigned_to_id'], unique=False)
    op.create_index('idx_timeline_item_created_at', 'timeline_items', ['created_at'], unique=False)
    op.create_index('idx_timeline_item_critical_status', 'timeline_items', ['is_critical', 'status'], unique=False)
    op.create_index('idx_timeline_item_end_time', 'timeline_items', ['end_time'], unique=False)
    op.create_index('idx_timeline_item_is_critical', 'timeline_items', ['is_critical'], unique=False)
    op.create_index('idx_timeline_item_is_flexible', 'timeline_items', ['is_flexible'], unique=False)
    op.create_index('idx_timeline_item_order_index', 'timeline_items', ['order_index'], unique=False)
    op.create_index('idx_timeline_item_start_time', 'timeline_items', ['start_time'], unique=False)
    op.create_index('idx_timeline_item_status', 'timeline_items', ['status'], unique=False)
    op.create_index('idx_timeline_item_task_id', 'timeline_items', ['task_id'], unique=False)
    op.create_index('idx_timeline_item_timeline_critical', 'timeline_items', ['timeline_id', 'is_critical'], unique=False)
    op.create_index('idx_timeline_item_timeline_id', 'timeline_items', ['timeline_id'], unique=False)
    op.create_index('idx_timeline_item_timeline_order', 'timeline_items', ['timeline_id', 'order_index'], unique=False)
    op.create_index('idx_timeline_item_timeline_start', 'timeline_items', ['timeline_id', 'start_time'], unique=False)
    op.create_index('idx_timeline_item_timeline_status', 'timeline_items', ['timeline_id', 'status'], unique=False)
    op.create_index('idx_timeline_item_type', 'timeline_items', ['item_type'], unique=False)
    op.create_index('idx_timeline_item_type_status', 'timeline_items', ['item_type', 'status'], unique=False)
    op.create_index('idx_timeline_item_updated_at', 'timeline_items', ['updated_at'], unique=False)
    op.create_index(op.f('ix_timeline_items_id'), 'timeline_items', ['id'], unique=False)
    op.create_table('vendor_bookings',
    sa.Column('booking_reference', sa.String(length=50), nullable=False),
    sa.Column('service_date', sa.DateTime(), nullable=False),
    sa.Column('service_duration_hours', sa.Integer(), nullable=True),
    sa.Column('guest_count', sa.Integer(), nullable=True),
    sa.Column('quoted_price', sa.Float(), nullable=False),
    sa.Column('final_price', sa.Float(), nullable=True),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('deposit_amount', sa.Float(), nullable=True),
    sa.Column('deposit_paid', sa.Boolean(), nullable=False),
    sa.Column('deposit_paid_at', sa.DateTime(), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'CONFIRMED', 'IN_PROGRESS', 'COMPLETED', 'CANCELLED', 'REFUNDED', name='bookingstatus'), nullable=False),
    sa.Column('confirmed_at', sa.DateTime(), nullable=True),
    sa.Column('cancelled_at', sa.DateTime(), nullable=True),
    sa.Column('cancellation_reason', sa.Text(), nullable=True),
    sa.Column('special_requests', sa.Text(), nullable=True),
    sa.Column('venue_details', sa.Text(), nullable=True),
    sa.Column('contact_person', sa.String(length=200), nullable=True),
    sa.Column('contact_phone', sa.String(length=20), nullable=True),
    sa.Column('contract_signed', sa.Boolean(), nullable=False),
    sa.Column('contract_url', sa.String(length=500), nullable=True),
    sa.Column('terms_accepted', sa.Boolean(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('service_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('booked_by_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['booked_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['service_id'], ['vendor_services.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('booking_reference')
    )
    op.create_index('idx_vendor_booking_booked_by_id', 'vendor_bookings', ['booked_by_id'], unique=False)
    op.create_index('idx_vendor_booking_confirmed_at', 'vendor_bookings', ['confirmed_at'], unique=False)
    op.create_index('idx_vendor_booking_event_id', 'vendor_bookings', ['event_id'], unique=False)
    op.create_index('idx_vendor_booking_reference', 'vendor_bookings', ['booking_reference'], unique=False)
    op.create_index('idx_vendor_booking_service_date', 'vendor_bookings', ['service_date'], unique=False)
    op.create_index('idx_vendor_booking_service_date_status', 'vendor_bookings', ['service_date', 'status'], unique=False)
    op.create_index('idx_vendor_booking_status', 'vendor_bookings', ['status'], unique=False)
    op.create_index('idx_vendor_booking_vendor_id', 'vendor_bookings', ['vendor_id'], unique=False)
    op.create_index('idx_vendor_booking_vendor_status', 'vendor_bookings', ['vendor_id', 'status'], unique=False)
    op.create_index(op.f('ix_vendor_bookings_id'), 'vendor_bookings', ['id'], unique=False)
    op.create_table('vendor_quotes',
    sa.Column('quote_id', sa.String(length=50), nullable=False),
    sa.Column('status', sa.Enum('PENDING', 'QUOTED', 'ACCEPTED', 'DECLINED', 'EXPIRED', 'CANCELLED', name='quotestatus'), nullable=False),
    sa.Column('event_type', sa.String(length=100), nullable=True),
    sa.Column('event_date', sa.DateTime(), nullable=False),
    sa.Column('guest_count', sa.Integer(), nullable=True),
    sa.Column('venue_location', sa.String(length=200), nullable=True),
    sa.Column('special_requirements', sa.Text(), nullable=True),
    sa.Column('budget_range', sa.String(length=100), nullable=True),
    sa.Column('quoted_price', sa.Float(), nullable=True),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('quote_details', sa.Text(), nullable=True),
    sa.Column('quote_notes', sa.Text(), nullable=True),
    sa.Column('valid_until', sa.DateTime(), nullable=False),
    sa.Column('response_time_hours', sa.Integer(), nullable=False),
    sa.Column('quoted_at', sa.DateTime(), nullable=True),
    sa.Column('responded_at', sa.DateTime(), nullable=True),
    sa.Column('accepted_at', sa.DateTime(), nullable=True),
    sa.Column('declined_at', sa.DateTime(), nullable=True),
    sa.Column('decline_reason', sa.Text(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('service_id', sa.Integer(), nullable=False),
    sa.Column('requested_by_id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
    sa.ForeignKeyConstraint(['requested_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['service_id'], ['vendor_services.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('quote_id')
    )
    op.create_index('idx_vendor_quote_event_date', 'vendor_quotes', ['event_date'], unique=False)
    op.create_index('idx_vendor_quote_quote_id', 'vendor_quotes', ['quote_id'], unique=False)
    op.create_index('idx_vendor_quote_requested_by_id', 'vendor_quotes', ['requested_by_id'], unique=False)
    op.create_index('idx_vendor_quote_status', 'vendor_quotes', ['status'], unique=False)
    op.create_index('idx_vendor_quote_valid_until', 'vendor_quotes', ['valid_until'], unique=False)
    op.create_index('idx_vendor_quote_vendor_id', 'vendor_quotes', ['vendor_id'], unique=False)
    op.create_index('idx_vendor_quote_vendor_status', 'vendor_quotes', ['vendor_id', 'status'], unique=False)
    op.create_index(op.f('ix_vendor_quotes_id'), 'vendor_quotes', ['id'], unique=False)
    op.create_table('game_participants',
    sa.Column('score', sa.Integer(), nullable=False),
    sa.Column('position', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('session_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['session_id'], ['game_sessions.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_game_participant_is_active', 'game_participants', ['is_active'], unique=False)
    op.create_index('idx_game_participant_position', 'game_participants', ['position'], unique=False)
    op.create_index('idx_game_participant_score', 'game_participants', ['score'], unique=False)
    op.create_index('idx_game_participant_session_active', 'game_participants', ['session_id', 'is_active'], unique=False)
    op.create_index('idx_game_participant_session_id', 'game_participants', ['session_id'], unique=False)
    op.create_index('idx_game_participant_session_score', 'game_participants', ['session_id', 'score'], unique=False)
    op.create_index('idx_game_participant_session_user', 'game_participants', ['session_id', 'user_id'], unique=False)
    op.create_index('idx_game_participant_user_id', 'game_participants', ['user_id'], unique=False)
    op.create_index(op.f('ix_game_participants_id'), 'game_participants', ['id'], unique=False)
    op.create_table('media_collection_items',
    sa.Column('collection_id', sa.Integer(), nullable=False),
    sa.Column('media_id', sa.Integer(), nullable=False),
    sa.Column('order_index', sa.Integer(), nullable=False),
    sa.Column('caption', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['collection_id'], ['media_collections.id'], ),
    sa.ForeignKeyConstraint(['media_id'], ['media.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_mediacollectionitem_collection_id', 'media_collection_items', ['collection_id'], unique=False)
    op.create_index('idx_mediacollectionitem_collection_media', 'media_collection_items', ['collection_id', 'media_id'], unique=False)
    op.create_index('idx_mediacollectionitem_collection_order', 'media_collection_items', ['collection_id', 'order_index'], unique=False)
    op.create_index('idx_mediacollectionitem_created_at', 'media_collection_items', ['created_at'], unique=False)
    op.create_index('idx_mediacollectionitem_media_id', 'media_collection_items', ['media_id'], unique=False)
    op.create_index('idx_mediacollectionitem_order_index', 'media_collection_items', ['order_index'], unique=False)
    op.create_index(op.f('ix_media_collection_items_id'), 'media_collection_items', ['id'], unique=False)
    op.create_table('playlist_votes',
    sa.Column('vote_type', sa.String(length=20), nullable=False),
    sa.Column('playlist_id', sa.Integer(), nullable=False),
    sa.Column('track_id', sa.Integer(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['playlist_id'], ['playlists.id'], ),
    sa.ForeignKeyConstraint(['track_id'], ['playlist_tracks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_playlist_vote_created_at', 'playlist_votes', ['created_at'], unique=False)
    op.create_index('idx_playlist_vote_playlist_id', 'playlist_votes', ['playlist_id'], unique=False)
    op.create_index('idx_playlist_vote_playlist_user', 'playlist_votes', ['playlist_id', 'user_id'], unique=False)
    op.create_index('idx_playlist_vote_track_id', 'playlist_votes', ['track_id'], unique=False)
    op.create_index('idx_playlist_vote_track_type', 'playlist_votes', ['track_id', 'vote_type'], unique=False)
    op.create_index('idx_playlist_vote_track_user', 'playlist_votes', ['track_id', 'user_id'], unique=False)
    op.create_index('idx_playlist_vote_type', 'playlist_votes', ['vote_type'], unique=False)
    op.create_index('idx_playlist_vote_user_id', 'playlist_votes', ['user_id'], unique=False)
    op.create_index('idx_playlist_vote_user_type', 'playlist_votes', ['user_id', 'vote_type'], unique=False)
    op.create_index(op.f('ix_playlist_votes_id'), 'playlist_votes', ['id'], unique=False)
    op.create_table('poll_votes',
    sa.Column('poll_id', sa.Integer(), nullable=False),
    sa.Column('option_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['option_id'], ['poll_options.id'], ),
    sa.ForeignKeyConstraint(['poll_id'], ['polls.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_poll_votes_id'), 'poll_votes', ['id'], unique=False)
    op.create_table('timeline_dependencies',
    sa.Column('dependency_type', sa.String(length=50), nullable=False),
    sa.Column('lag_minutes', sa.Integer(), nullable=False),
    sa.Column('item_id', sa.Integer(), nullable=False),
    sa.Column('depends_on_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['depends_on_id'], ['timeline_items.id'], ),
    sa.ForeignKeyConstraint(['item_id'], ['timeline_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timeline_dependency_created_at', 'timeline_dependencies', ['created_at'], unique=False)
    op.create_index('idx_timeline_dependency_depends_on_id', 'timeline_dependencies', ['depends_on_id'], unique=False)
    op.create_index('idx_timeline_dependency_item_depends', 'timeline_dependencies', ['item_id', 'depends_on_id'], unique=False)
    op.create_index('idx_timeline_dependency_item_id', 'timeline_dependencies', ['item_id'], unique=False)
    op.create_index('idx_timeline_dependency_type', 'timeline_dependencies', ['dependency_type'], unique=False)
    op.create_index('idx_timeline_dependency_type_item', 'timeline_dependencies', ['dependency_type', 'item_id'], unique=False)
    op.create_index(op.f('ix_timeline_dependencies_id'), 'timeline_dependencies', ['id'], unique=False)
    op.create_table('timeline_notifications',
    sa.Column('notification_type', sa.String(length=50), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('scheduled_time', sa.DateTime(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=True),
    sa.Column('is_sent', sa.Boolean(), nullable=False),
    sa.Column('send_email', sa.Boolean(), nullable=False),
    sa.Column('send_push', sa.Boolean(), nullable=False),
    sa.Column('timeline_item_id', sa.Integer(), nullable=False),
    sa.Column('recipient_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['recipient_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['timeline_item_id'], ['timeline_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timeline_notification_created_at', 'timeline_notifications', ['created_at'], unique=False)
    op.create_index('idx_timeline_notification_is_sent', 'timeline_notifications', ['is_sent'], unique=False)
    op.create_index('idx_timeline_notification_item_recipient', 'timeline_notifications', ['timeline_item_id', 'recipient_id'], unique=False)
    op.create_index('idx_timeline_notification_recipient_id', 'timeline_notifications', ['recipient_id'], unique=False)
    op.create_index('idx_timeline_notification_recipient_sent', 'timeline_notifications', ['recipient_id', 'is_sent'], unique=False)
    op.create_index('idx_timeline_notification_scheduled_sent', 'timeline_notifications', ['scheduled_time', 'is_sent'], unique=False)
    op.create_index('idx_timeline_notification_scheduled_time', 'timeline_notifications', ['scheduled_time'], unique=False)
    op.create_index('idx_timeline_notification_sent_at', 'timeline_notifications', ['sent_at'], unique=False)
    op.create_index('idx_timeline_notification_timeline_item_id', 'timeline_notifications', ['timeline_item_id'], unique=False)
    op.create_index('idx_timeline_notification_type', 'timeline_notifications', ['notification_type'], unique=False)
    op.create_index('idx_timeline_notification_type_sent', 'timeline_notifications', ['notification_type', 'is_sent'], unique=False)
    op.create_index(op.f('ix_timeline_notifications_id'), 'timeline_notifications', ['id'], unique=False)
    op.create_table('timeline_updates',
    sa.Column('update_type', sa.String(length=50), nullable=False),
    sa.Column('old_value', sa.Text(), nullable=True),
    sa.Column('new_value', sa.Text(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('timeline_item_id', sa.Integer(), nullable=False),
    sa.Column('updated_by_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['timeline_item_id'], ['timeline_items.id'], ),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timeline_update_created_at', 'timeline_updates', ['created_at'], unique=False)
    op.create_index('idx_timeline_update_item_created', 'timeline_updates', ['timeline_item_id', 'created_at'], unique=False)
    op.create_index('idx_timeline_update_item_type', 'timeline_updates', ['timeline_item_id', 'update_type'], unique=False)
    op.create_index('idx_timeline_update_timeline_item_id', 'timeline_updates', ['timeline_item_id'], unique=False)
    op.create_index('idx_timeline_update_type', 'timeline_updates', ['update_type'], unique=False)
    op.create_index('idx_timeline_update_updated_by_id', 'timeline_updates', ['updated_by_id'], unique=False)
    op.create_index('idx_timeline_update_user_created', 'timeline_updates', ['updated_by_id', 'created_at'], unique=False)
    op.create_index(op.f('ix_timeline_updates_id'), 'timeline_updates', ['id'], unique=False)
    op.create_table('vendor_contracts',
    sa.Column('contract_number', sa.String(length=50), nullable=False),
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('terms_and_conditions', sa.Text(), nullable=False),
    sa.Column('cancellation_policy', sa.Text(), nullable=False),
    sa.Column('client_signed', sa.Boolean(), nullable=False),
    sa.Column('client_signed_at', sa.DateTime(), nullable=True),
    sa.Column('client_signature_url', sa.String(length=500), nullable=True),
    sa.Column('vendor_signed', sa.Boolean(), nullable=False),
    sa.Column('vendor_signed_at', sa.DateTime(), nullable=True),
    sa.Column('vendor_signature_url', sa.String(length=500), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('contract_pdf_url', sa.String(length=500), nullable=True),
    sa.Column('booking_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['booking_id'], ['vendor_bookings.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('contract_number')
    )
    op.create_index(op.f('ix_vendor_contracts_id'), 'vendor_contracts', ['id'], unique=False)
    op.create_table('vendor_payments',
    sa.Column('payment_reference', sa.String(length=100), nullable=False),
    sa.Column('amount', sa.Float(), nullable=False),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('payment_method', sa.String(length=50), nullable=False),
    sa.Column('payment_provider_id', sa.String(length=100), nullable=True),
    sa.Column('stripe_payment_intent_id', sa.String(length=100), nullable=True),
    sa.Column('stripe_charge_id', sa.String(length=100), nullable=True),
    sa.Column('stripe_transfer_id', sa.String(length=100), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'PROCESSING', 'PAID', 'FAILED', 'REFUNDED', 'PARTIALLY_PAID', name='paymentstatus'), nullable=False),
    sa.Column('paid_at', sa.DateTime(), nullable=True),
    sa.Column('failed_at', sa.DateTime(), nullable=True),
    sa.Column('refunded_at', sa.DateTime(), nullable=True),
    sa.Column('is_deposit', sa.Boolean(), nullable=False),
    sa.Column('description', sa.String(length=200), nullable=True),
    sa.Column('error_code', sa.String(length=50), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('extra_data', sa.Text(), nullable=True),
    sa.Column('booking_id', sa.Integer(), nullable=False),
    sa.Column('paid_by_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['booking_id'], ['vendor_bookings.id'], ),
    sa.ForeignKeyConstraint(['paid_by_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('payment_reference')
    )
    op.create_index('idx_vendor_payment_amount', 'vendor_payments', ['amount'], unique=False)
    op.create_index('idx_vendor_payment_booking_id', 'vendor_payments', ['booking_id'], unique=False)
    op.create_index('idx_vendor_payment_booking_status', 'vendor_payments', ['booking_id', 'status'], unique=False)
    op.create_index('idx_vendor_payment_paid_at', 'vendor_payments', ['paid_at'], unique=False)
    op.create_index('idx_vendor_payment_status', 'vendor_payments', ['status'], unique=False)
    op.create_index('idx_vendor_payment_stripe_charge_id', 'vendor_payments', ['stripe_charge_id'], unique=False)
    op.create_index('idx_vendor_payment_stripe_payment_intent_id', 'vendor_payments', ['stripe_payment_intent_id'], unique=False)
    op.create_index(op.f('ix_vendor_payments_id'), 'vendor_payments', ['id'], unique=False)
    op.create_table('vendor_reviews',
    sa.Column('rating', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=200), nullable=True),
    sa.Column('review_text', sa.Text(), nullable=False),
    sa.Column('service_quality', sa.Integer(), nullable=True),
    sa.Column('communication', sa.Integer(), nullable=True),
    sa.Column('value_for_money', sa.Integer(), nullable=True),
    sa.Column('punctuality', sa.Integer(), nullable=True),
    sa.Column('is_verified', sa.Boolean(), nullable=False),
    sa.Column('verified_at', sa.DateTime(), nullable=True),
    sa.Column('is_approved', sa.Boolean(), nullable=False),
    sa.Column('is_featured', sa.Boolean(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('booking_id', sa.Integer(), nullable=True),
    sa.Column('reviewer_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_deleted', sa.Boolean(), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['booking_id'], ['vendor_bookings.id'], ),
    sa.ForeignKeyConstraint(['reviewer_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vendor_reviews_id'), 'vendor_reviews', ['id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_vendor_reviews_id'), table_name='vendor_reviews')
    op.drop_table('vendor_reviews')
    op.drop_index(op.f('ix_vendor_payments_id'), table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_stripe_payment_intent_id', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_stripe_charge_id', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_status', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_paid_at', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_booking_status', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_booking_id', table_name='vendor_payments')
    op.drop_index('idx_vendor_payment_amount', table_name='vendor_payments')
    op.drop_table('vendor_payments')
    op.drop_index(op.f('ix_vendor_contracts_id'), table_name='vendor_contracts')
    op.drop_table('vendor_contracts')
    op.drop_index(op.f('ix_timeline_updates_id'), table_name='timeline_updates')
    op.drop_index('idx_timeline_update_user_created', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_updated_by_id', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_type', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_timeline_item_id', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_item_type', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_item_created', table_name='timeline_updates')
    op.drop_index('idx_timeline_update_created_at', table_name='timeline_updates')
    op.drop_table('timeline_updates')
    op.drop_index(op.f('ix_timeline_notifications_id'), table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_type_sent', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_type', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_timeline_item_id', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_sent_at', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_scheduled_time', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_scheduled_sent', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_recipient_sent', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_recipient_id', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_item_recipient', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_is_sent', table_name='timeline_notifications')
    op.drop_index('idx_timeline_notification_created_at', table_name='timeline_notifications')
    op.drop_table('timeline_notifications')
    op.drop_index(op.f('ix_timeline_dependencies_id'), table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_type_item', table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_type', table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_item_id', table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_item_depends', table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_depends_on_id', table_name='timeline_dependencies')
    op.drop_index('idx_timeline_dependency_created_at', table_name='timeline_dependencies')
    op.drop_table('timeline_dependencies')
    op.drop_index(op.f('ix_poll_votes_id'), table_name='poll_votes')
    op.drop_table('poll_votes')
    op.drop_index(op.f('ix_playlist_votes_id'), table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_user_type', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_user_id', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_type', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_track_user', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_track_type', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_track_id', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_playlist_user', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_playlist_id', table_name='playlist_votes')
    op.drop_index('idx_playlist_vote_created_at', table_name='playlist_votes')
    op.drop_table('playlist_votes')
    op.drop_index(op.f('ix_media_collection_items_id'), table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_order_index', table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_media_id', table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_created_at', table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_collection_order', table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_collection_media', table_name='media_collection_items')
    op.drop_index('idx_mediacollectionitem_collection_id', table_name='media_collection_items')
    op.drop_table('media_collection_items')
    op.drop_index(op.f('ix_game_participants_id'), table_name='game_participants')
    op.drop_index('idx_game_participant_user_id', table_name='game_participants')
    op.drop_index('idx_game_participant_session_user', table_name='game_participants')
    op.drop_index('idx_game_participant_session_score', table_name='game_participants')
    op.drop_index('idx_game_participant_session_id', table_name='game_participants')
    op.drop_index('idx_game_participant_session_active', table_name='game_participants')
    op.drop_index('idx_game_participant_score', table_name='game_participants')
    op.drop_index('idx_game_participant_position', table_name='game_participants')
    op.drop_index('idx_game_participant_is_active', table_name='game_participants')
    op.drop_table('game_participants')
    op.drop_index(op.f('ix_vendor_quotes_id'), table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_vendor_status', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_vendor_id', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_valid_until', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_status', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_requested_by_id', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_quote_id', table_name='vendor_quotes')
    op.drop_index('idx_vendor_quote_event_date', table_name='vendor_quotes')
    op.drop_table('vendor_quotes')
    op.drop_index(op.f('ix_vendor_bookings_id'), table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_vendor_status', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_vendor_id', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_status', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_service_date_status', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_service_date', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_reference', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_event_id', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_confirmed_at', table_name='vendor_bookings')
    op.drop_index('idx_vendor_booking_booked_by_id', table_name='vendor_bookings')
    op.drop_table('vendor_bookings')
    op.drop_index(op.f('ix_timeline_items_id'), table_name='timeline_items')
    op.drop_index('idx_timeline_item_updated_at', table_name='timeline_items')
    op.drop_index('idx_timeline_item_type_status', table_name='timeline_items')
    op.drop_index('idx_timeline_item_type', table_name='timeline_items')
    op.drop_index('idx_timeline_item_timeline_status', table_name='timeline_items')
    op.drop_index('idx_timeline_item_timeline_start', table_name='timeline_items')
    op.drop_index('idx_timeline_item_timeline_order', table_name='timeline_items')
    op.drop_index('idx_timeline_item_timeline_id', table_name='timeline_items')
    op.drop_index('idx_timeline_item_timeline_critical', table_name='timeline_items')
    op.drop_index('idx_timeline_item_task_id', table_name='timeline_items')
    op.drop_index('idx_timeline_item_status', table_name='timeline_items')
    op.drop_index('idx_timeline_item_start_time', table_name='timeline_items')
    op.drop_index('idx_timeline_item_order_index', table_name='timeline_items')
    op.drop_index('idx_timeline_item_is_flexible', table_name='timeline_items')
    op.drop_index('idx_timeline_item_is_critical', table_name='timeline_items')
    op.drop_index('idx_timeline_item_end_time', table_name='timeline_items')
    op.drop_index('idx_timeline_item_critical_status', table_name='timeline_items')
    op.drop_index('idx_timeline_item_created_at', table_name='timeline_items')
    op.drop_index('idx_timeline_item_assigned_to_id', table_name='timeline_items')
    op.drop_index('idx_timeline_item_assigned_status', table_name='timeline_items')
    op.drop_table('timeline_items')
    op.drop_index(op.f('ix_poll_options_id'), table_name='poll_options')
    op.drop_table('poll_options')
    op.drop_index(op.f('ix_playlist_tracks_id'), table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_year', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_user_created', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_position', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_playlist_position', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_playlist_id', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_playlist_created', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_genre_year', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_genre', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_explicit', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_created_at', table_name='playlist_tracks')
    op.drop_index('idx_playlist_track_added_by_id', table_name='playlist_tracks')
    op.drop_table('playlist_tracks')
    op.drop_index(op.f('ix_notification_queue_id'), table_name='notification_queue')
    op.drop_table('notification_queue')
    op.drop_index(op.f('ix_notification_logs_id'), table_name='notification_logs')
    op.drop_index('idx_notificationlog_status', table_name='notification_logs')
    op.drop_index('idx_notificationlog_sent_at', table_name='notification_logs')
    op.drop_index('idx_notificationlog_reminder_id', table_name='notification_logs')
    op.drop_index('idx_notificationlog_recipient_type', table_name='notification_logs')
    op.drop_index('idx_notificationlog_recipient_sent', table_name='notification_logs')
    op.drop_index('idx_notificationlog_recipient_id', table_name='notification_logs')
    op.drop_index('idx_notificationlog_read_at', table_name='notification_logs')
    op.drop_index('idx_notificationlog_notification_type', table_name='notification_logs')
    op.drop_index('idx_notificationlog_event_status', table_name='notification_logs')
    op.drop_index('idx_notificationlog_event_id', table_name='notification_logs')
    op.drop_index('idx_notificationlog_delivered_at', table_name='notification_logs')
    op.drop_index('idx_notificationlog_created_at', table_name='notification_logs')
    op.drop_index('idx_notificationlog_channel_status', table_name='notification_logs')
    op.drop_index('idx_notificationlog_channel', table_name='notification_logs')
    op.drop_table('notification_logs')
    op.drop_index(op.f('ix_moodboard_likes_id'), table_name='moodboard_likes')
    op.drop_index('idx_moodboard_like_user_id', table_name='moodboard_likes')
    op.drop_index('idx_moodboard_like_user_created', table_name='moodboard_likes')
    op.drop_index('idx_moodboard_like_moodboard_id', table_name='moodboard_likes')
    op.drop_index('idx_moodboard_like_created_at', table_name='moodboard_likes')
    op.drop_index('idx_moodboard_like_board_user', table_name='moodboard_likes')
    op.drop_table('moodboard_likes')
    op.drop_index(op.f('ix_moodboard_items_id'), table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_user_created', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_updated_at', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_moodboard_id', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_created_at', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_content_type', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_board_type', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_board_created', table_name='moodboard_items')
    op.drop_index('idx_moodboard_item_added_by_id', table_name='moodboard_items')
    op.drop_table('moodboard_items')
    op.drop_index(op.f('ix_moodboard_comments_id'), table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_updated_at', table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_moodboard_id', table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_created_at', table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_board_created', table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_author_id', table_name='moodboard_comments')
    op.drop_index('idx_moodboard_comment_author_created', table_name='moodboard_comments')
    op.drop_table('moodboard_comments')
    op.drop_index(op.f('ix_message_read_receipts_id'), table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_user_read', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_user_id', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_read_at', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_message_user', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_message_read', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_message_id', table_name='message_read_receipts')
    op.drop_index('idx_messagereadreceipt_created_at', table_name='message_read_receipts')
    op.drop_table('message_read_receipts')
    op.drop_index(op.f('ix_message_reactions_id'), table_name='message_reactions')
    op.drop_index('idx_messagereaction_user_id', table_name='message_reactions')
    op.drop_index('idx_messagereaction_user_emoji', table_name='message_reactions')
    op.drop_index('idx_messagereaction_message_user', table_name='message_reactions')
    op.drop_index('idx_messagereaction_message_id', table_name='message_reactions')
    op.drop_index('idx_messagereaction_message_emoji', table_name='message_reactions')
    op.drop_index('idx_messagereaction_emoji', table_name='message_reactions')
    op.drop_index('idx_messagereaction_created_at', table_name='message_reactions')
    op.drop_table('message_reactions')
    op.drop_index(op.f('ix_message_mentions_id'), table_name='message_mentions')
    op.drop_index('idx_messagemention_user_created', table_name='message_mentions')
    op.drop_index('idx_messagemention_start_index', table_name='message_mentions')
    op.drop_index('idx_messagemention_message_user', table_name='message_mentions')
    op.drop_index('idx_messagemention_message_id', table_name='message_mentions')
    op.drop_index('idx_messagemention_mentioned_user_id', table_name='message_mentions')
    op.drop_index('idx_messagemention_end_index', table_name='message_mentions')
    op.drop_index('idx_messagemention_created_at', table_name='message_mentions')
    op.drop_table('message_mentions')
    op.drop_index(op.f('ix_media_tags_id'), table_name='media_tags')
    op.drop_index('idx_mediatag_tag_name', table_name='media_tags')
    op.drop_index('idx_mediatag_media_tag', table_name='media_tags')
    op.drop_index('idx_mediatag_media_id', table_name='media_tags')
    op.drop_index('idx_mediatag_created_at', table_name='media_tags')
    op.drop_table('media_tags')
    op.drop_index(op.f('ix_media_shares_id'), table_name='media_shares')
    op.drop_index('idx_mediashare_shared_with_user_id', table_name='media_shares')
    op.drop_index('idx_mediashare_shared_with_created', table_name='media_shares')
    op.drop_index('idx_mediashare_shared_by_user_id', table_name='media_shares')
    op.drop_index('idx_mediashare_shared_by_created', table_name='media_shares')
    op.drop_index('idx_mediashare_media_shared_with', table_name='media_shares')
    op.drop_index('idx_mediashare_media_id', table_name='media_shares')
    op.drop_index('idx_mediashare_expires_at', table_name='media_shares')
    op.drop_index('idx_mediashare_created_at', table_name='media_shares')
    op.drop_index('idx_mediashare_can_reshare', table_name='media_shares')
    op.drop_index('idx_mediashare_can_download', table_name='media_shares')
    op.drop_table('media_shares')
    op.drop_index(op.f('ix_media_likes_id'), table_name='media_likes')
    op.drop_index('idx_medialike_user_reaction', table_name='media_likes')
    op.drop_index('idx_medialike_user_id', table_name='media_likes')
    op.drop_index('idx_medialike_reaction_type', table_name='media_likes')
    op.drop_index('idx_medialike_media_user', table_name='media_likes')
    op.drop_index('idx_medialike_media_reaction', table_name='media_likes')
    op.drop_index('idx_medialike_media_id', table_name='media_likes')
    op.drop_index('idx_medialike_created_at', table_name='media_likes')
    op.drop_table('media_likes')
    op.drop_index(op.f('ix_media_comments_id'), table_name='media_comments')
    op.drop_index('idx_mediacomment_updated_at', table_name='media_comments')
    op.drop_index('idx_mediacomment_parent_id', table_name='media_comments')
    op.drop_index('idx_mediacomment_parent_created', table_name='media_comments')
    op.drop_index('idx_mediacomment_media_id', table_name='media_comments')
    op.drop_index('idx_mediacomment_media_deleted', table_name='media_comments')
    op.drop_index('idx_mediacomment_media_created', table_name='media_comments')
    op.drop_index('idx_mediacomment_is_deleted', table_name='media_comments')
    op.drop_index('idx_mediacomment_created_at', table_name='media_comments')
    op.drop_index('idx_mediacomment_author_id', table_name='media_comments')
    op.drop_index('idx_mediacomment_author_created', table_name='media_comments')
    op.drop_table('media_comments')
    op.drop_index(op.f('ix_media_collections_id'), table_name='media_collections')
    op.drop_index('idx_mediacollection_updated_at', table_name='media_collections')
    op.drop_index('idx_mediacollection_owner_public', table_name='media_collections')
    op.drop_index('idx_mediacollection_owner_id', table_name='media_collections')
    op.drop_index('idx_mediacollection_owner_created', table_name='media_collections')
    op.drop_index('idx_mediacollection_is_public', table_name='media_collections')
    op.drop_index('idx_mediacollection_is_deleted', table_name='media_collections')
    op.drop_index('idx_mediacollection_event_public', table_name='media_collections')
    op.drop_index('idx_mediacollection_event_id', table_name='media_collections')
    op.drop_index('idx_mediacollection_event_created', table_name='media_collections')
    op.drop_index('idx_mediacollection_created_at', table_name='media_collections')
    op.drop_index('idx_mediacollection_cover_media_id', table_name='media_collections')
    op.drop_table('media_collections')
    op.drop_index(op.f('ix_game_sessions_id'), table_name='game_sessions')
    op.drop_index('idx_game_session_status', table_name='game_sessions')
    op.drop_index('idx_game_session_start_time', table_name='game_sessions')
    op.drop_index('idx_game_session_host_status', table_name='game_sessions')
    op.drop_index('idx_game_session_host_id', table_name='game_sessions')
    op.drop_index('idx_game_session_game_status', table_name='game_sessions')
    op.drop_index('idx_game_session_game_id', table_name='game_sessions')
    op.drop_index('idx_game_session_game_created', table_name='game_sessions')
    op.drop_index('idx_game_session_event_status', table_name='game_sessions')
    op.drop_index('idx_game_session_event_id', table_name='game_sessions')
    op.drop_index('idx_game_session_end_time', table_name='game_sessions')
    op.drop_index('idx_game_session_current_round', table_name='game_sessions')
    op.drop_index('idx_game_session_created_at', table_name='game_sessions')
    op.drop_table('game_sessions')
    op.drop_index(op.f('ix_game_ratings_id'), table_name='game_ratings')
    op.drop_index('idx_game_rating_user_rating', table_name='game_ratings')
    op.drop_index('idx_game_rating_user_id', table_name='game_ratings')
    op.drop_index('idx_game_rating_rating', table_name='game_ratings')
    op.drop_index('idx_game_rating_game_user', table_name='game_ratings')
    op.drop_index('idx_game_rating_game_rating', table_name='game_ratings')
    op.drop_index('idx_game_rating_game_id', table_name='game_ratings')
    op.drop_index('idx_game_rating_game_created', table_name='game_ratings')
    op.drop_index('idx_game_rating_created_at', table_name='game_ratings')
    op.drop_table('game_ratings')
    op.drop_index(op.f('ix_expense_splits_id'), table_name='expense_splits')
    op.drop_table('expense_splits')
    op.drop_index(op.f('ix_chat_participants_id'), table_name='chat_participants')
    op.drop_index('idx_chatparticipant_user_last_seen', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_user_id', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_push_notifications', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_muted_until', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_last_seen_at', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_last_read_message_id', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_is_muted', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_event_user', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_event_muted', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_event_id', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_email_notifications', table_name='chat_participants')
    op.drop_index('idx_chatparticipant_created_at', table_name='chat_participants')
    op.drop_table('chat_participants')
    op.drop_index(op.f('ix_ai_chat_messages_id'), table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_updated_at', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_session_role', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_session_id', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_session_created', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_role_created', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_role', table_name='ai_chat_messages')
    op.drop_index('idx_ai_chat_message_created_at', table_name='ai_chat_messages')
    op.drop_table('ai_chat_messages')
    op.drop_index(op.f('ix_vendor_services_id'), table_name='vendor_services')
    op.drop_table('vendor_services')
    op.drop_index(op.f('ix_vendor_portfolio_id'), table_name='vendor_portfolio')
    op.drop_table('vendor_portfolio')
    op.drop_index(op.f('ix_vendor_availability_id'), table_name='vendor_availability')
    op.drop_table('vendor_availability')
    op.drop_index(op.f('ix_tasks_id'), table_name='tasks')
    op.drop_index('idx_task_status', table_name='tasks')
    op.drop_index('idx_task_priority_status', table_name='tasks')
    op.drop_index('idx_task_priority', table_name='tasks')
    op.drop_index('idx_task_is_deleted', table_name='tasks')
    op.drop_index('idx_task_event_status', table_name='tasks')
    op.drop_index('idx_task_event_id', table_name='tasks')
    op.drop_index('idx_task_due_status', table_name='tasks')
    op.drop_index('idx_task_due_date', table_name='tasks')
    op.drop_index('idx_task_creator_id', table_name='tasks')
    op.drop_index('idx_task_completed_at', table_name='tasks')
    op.drop_index('idx_task_category', table_name='tasks')
    op.drop_index('idx_task_assignee_status', table_name='tasks')
    op.drop_index('idx_task_assignee_id', table_name='tasks')
    op.drop_table('tasks')
    op.drop_index(op.f('ix_subscription_payments_id'), table_name='subscription_payments')
    op.drop_index('idx_stripe_payment_intent', table_name='subscription_payments')
    op.drop_index('idx_stripe_invoice', table_name='subscription_payments')
    op.drop_index('idx_payment_subscription', table_name='subscription_payments')
    op.drop_index('idx_payment_status', table_name='subscription_payments')
    op.drop_index('idx_payment_dates', table_name='subscription_payments')
    op.drop_index('idx_payment_amount', table_name='subscription_payments')
    op.drop_table('subscription_payments')
    op.drop_index(op.f('ix_smart_reminders_id'), table_name='smart_reminders')
    op.drop_index('idx_smartreminder_type_status', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_status', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_scheduled_time', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_notification_type', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_is_active', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_frequency', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_event_status', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_event_id', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_creator_id', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_creator_active', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_created_at', table_name='smart_reminders')
    op.drop_index('idx_smartreminder_active_scheduled', table_name='smart_reminders')
    op.drop_table('smart_reminders')
    op.drop_index(op.f('ix_polls_id'), table_name='polls')
    op.drop_index('idx_poll_is_deleted', table_name='polls')
    op.drop_index('idx_poll_event_id', table_name='polls')
    op.drop_index('idx_poll_event_created', table_name='polls')
    op.drop_index('idx_poll_creator_id', table_name='polls')
    op.drop_index('idx_poll_creator_created', table_name='polls')
    op.drop_index('idx_poll_created_at', table_name='polls')
    op.drop_index('idx_poll_closes_at', table_name='polls')
    op.drop_table('polls')
    op.drop_index(op.f('ix_playlists_id'), table_name='playlists')
    op.drop_index('idx_playlist_updated_at', table_name='playlists')
    op.drop_index('idx_playlist_provider_public', table_name='playlists')
    op.drop_index('idx_playlist_provider', table_name='playlists')
    op.drop_index('idx_playlist_is_public', table_name='playlists')
    op.drop_index('idx_playlist_is_collaborative', table_name='playlists')
    op.drop_index('idx_playlist_event_public', table_name='playlists')
    op.drop_index('idx_playlist_event_id', table_name='playlists')
    op.drop_index('idx_playlist_event_collaborative', table_name='playlists')
    op.drop_index('idx_playlist_creator_provider', table_name='playlists')
    op.drop_index('idx_playlist_creator_id', table_name='playlists')
    op.drop_index('idx_playlist_created_at', table_name='playlists')
    op.drop_table('playlists')
    op.drop_index(op.f('ix_moodboards_id'), table_name='moodboards')
    op.drop_index('idx_moodboard_updated_at', table_name='moodboards')
    op.drop_index('idx_moodboard_type_public', table_name='moodboards')
    op.drop_index('idx_moodboard_type', table_name='moodboards')
    op.drop_index('idx_moodboard_is_public', table_name='moodboards')
    op.drop_index('idx_moodboard_event_public', table_name='moodboards')
    op.drop_index('idx_moodboard_event_id', table_name='moodboards')
    op.drop_index('idx_moodboard_event_created', table_name='moodboards')
    op.drop_index('idx_moodboard_creator_type', table_name='moodboards')
    op.drop_index('idx_moodboard_creator_id', table_name='moodboards')
    op.drop_index('idx_moodboard_created_at', table_name='moodboards')
    op.drop_index('idx_moodboard_allow_contributions', table_name='moodboards')
    op.drop_table('moodboards')
    op.drop_index(op.f('ix_messages_id'), table_name='messages')
    op.drop_index('idx_message_status', table_name='messages')
    op.drop_index('idx_message_sender_id', table_name='messages')
    op.drop_index('idx_message_sender_created', table_name='messages')
    op.drop_index('idx_message_reply_to_id', table_name='messages')
    op.drop_index('idx_message_reply_created', table_name='messages')
    op.drop_index('idx_message_pinned_by_id', table_name='messages')
    op.drop_index('idx_message_pinned_at', table_name='messages')
    op.drop_index('idx_message_message_type', table_name='messages')
    op.drop_index('idx_message_is_pinned', table_name='messages')
    op.drop_index('idx_message_is_edited', table_name='messages')
    op.drop_index('idx_message_event_type', table_name='messages')
    op.drop_index('idx_message_event_pinned', table_name='messages')
    op.drop_index('idx_message_event_id', table_name='messages')
    op.drop_index('idx_message_event_created', table_name='messages')
    op.drop_index('idx_message_edited_at', table_name='messages')
    op.drop_index('idx_message_created_at', table_name='messages')
    op.drop_table('messages')
    op.drop_index(op.f('ix_media_id'), table_name='media')
    op.drop_index('idx_media_uploader_type', table_name='media')
    op.drop_index('idx_media_uploader_id', table_name='media')
    op.drop_index('idx_media_uploader_created', table_name='media')
    op.drop_index('idx_media_updated_at', table_name='media')
    op.drop_index('idx_media_type_public', table_name='media')
    op.drop_index('idx_media_processing_status', table_name='media')
    op.drop_index('idx_media_mime_type', table_name='media')
    op.drop_index('idx_media_media_type', table_name='media')
    op.drop_index('idx_media_is_public', table_name='media')
    op.drop_index('idx_media_is_processed', table_name='media')
    op.drop_index('idx_media_is_featured', table_name='media')
    op.drop_index('idx_media_is_deleted', table_name='media')
    op.drop_index('idx_media_is_active', table_name='media')
    op.drop_index('idx_media_file_size', table_name='media')
    op.drop_index('idx_media_event_type', table_name='media')
    op.drop_index('idx_media_event_id', table_name='media')
    op.drop_index('idx_media_event_featured', table_name='media')
    op.drop_index('idx_media_event_created', table_name='media')
    op.drop_index('idx_media_created_at', table_name='media')
    op.drop_table('media')
    op.drop_index(op.f('ix_invite_link_usages_invite_link_id'), table_name='invite_link_usages')
    op.drop_index(op.f('ix_invite_link_usages_id'), table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_user_id', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_user_created', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_successful', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_link_id', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_link_created', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_ip', table_name='invite_link_usages')
    op.drop_index('idx_invite_link_usages_created_at', table_name='invite_link_usages')
    op.drop_table('invite_link_usages')
    op.drop_index(op.f('ix_games_id'), table_name='games')
    op.drop_index('idx_game_updated_at', table_name='games')
    op.drop_index('idx_game_type_difficulty', table_name='games')
    op.drop_index('idx_game_type', table_name='games')
    op.drop_index('idx_game_public_type', table_name='games')
    op.drop_index('idx_game_players_difficulty', table_name='games')
    op.drop_index('idx_game_min_players', table_name='games')
    op.drop_index('idx_game_max_players', table_name='games')
    op.drop_index('idx_game_is_public', table_name='games')
    op.drop_index('idx_game_event_type', table_name='games')
    op.drop_index('idx_game_event_id', table_name='games')
    op.drop_index('idx_game_difficulty', table_name='games')
    op.drop_index('idx_game_creator_type', table_name='games')
    op.drop_index('idx_game_creator_id', table_name='games')
    op.drop_index('idx_game_created_at', table_name='games')
    op.drop_index('idx_game_age_appropriate', table_name='games')
    op.drop_table('games')
    op.drop_index(op.f('ix_expenses_id'), table_name='expenses')
    op.drop_index('idx_expense_user_date', table_name='expenses')
    op.drop_index('idx_expense_paid_by_user_id', table_name='expenses')
    op.drop_index('idx_expense_is_shared', table_name='expenses')
    op.drop_index('idx_expense_is_deleted', table_name='expenses')
    op.drop_index('idx_expense_event_id', table_name='expenses')
    op.drop_index('idx_expense_event_date', table_name='expenses')
    op.drop_index('idx_expense_event_category', table_name='expenses')
    op.drop_index('idx_expense_date', table_name='expenses')
    op.drop_index('idx_expense_category', table_name='expenses')
    op.drop_index('idx_expense_amount', table_name='expenses')
    op.drop_table('expenses')
    op.drop_index(op.f('ix_event_timelines_id'), table_name='event_timelines')
    op.drop_index('idx_event_timeline_updated_at', table_name='event_timelines')
    op.drop_index('idx_event_timeline_start_time', table_name='event_timelines')
    op.drop_index('idx_event_timeline_is_template', table_name='event_timelines')
    op.drop_index('idx_event_timeline_is_active', table_name='event_timelines')
    op.drop_index('idx_event_timeline_event_template', table_name='event_timelines')
    op.drop_index('idx_event_timeline_event_id', table_name='event_timelines')
    op.drop_index('idx_event_timeline_event_active', table_name='event_timelines')
    op.drop_index('idx_event_timeline_end_time', table_name='event_timelines')
    op.drop_index('idx_event_timeline_creator_id', table_name='event_timelines')
    op.drop_index('idx_event_timeline_creator_created', table_name='event_timelines')
    op.drop_index('idx_event_timeline_created_at', table_name='event_timelines')
    op.drop_index('idx_event_timeline_auto_generated', table_name='event_timelines')
    op.drop_index('idx_event_timeline_active_template', table_name='event_timelines')
    op.drop_table('event_timelines')
    op.drop_index(op.f('ix_event_invitations_id'), table_name='event_invitations')
    op.drop_index('idx_invitation_user_status', table_name='event_invitations')
    op.drop_index('idx_invitation_user_id', table_name='event_invitations')
    op.drop_index('idx_invitation_rsvp_status', table_name='event_invitations')
    op.drop_index('idx_invitation_responded_at', table_name='event_invitations')
    op.drop_index('idx_invitation_is_deleted', table_name='event_invitations')
    op.drop_index('idx_invitation_invited_at', table_name='event_invitations')
    op.drop_index('idx_invitation_event_status', table_name='event_invitations')
    op.drop_index('idx_invitation_event_id', table_name='event_invitations')
    op.drop_table('event_invitations')
    op.drop_table('event_collaborators')
    op.drop_index(op.f('ix_event_chat_settings_id'), table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_require_approval', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_notify_new_message', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_notify_mention', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_is_enabled', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_event_id', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_created_at', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_allow_reactions', table_name='event_chat_settings')
    op.drop_index('idx_eventchatsettings_allow_file_uploads', table_name='event_chat_settings')
    op.drop_table('event_chat_settings')
    op.drop_index(op.f('ix_contact_invitations_id'), table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_type_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_type', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_tracking_id', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_sent_at', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_sender_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_sender_id', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_sender_created', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_phone_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_phone', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_method_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_method', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_expires_at', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_event_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_event_id', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_email_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_email', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_created_at', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_contact_status', table_name='contact_invitations')
    op.drop_index('idx_contact_invitation_contact_id', table_name='contact_invitations')
    op.drop_table('contact_invitations')
    op.drop_index(op.f('ix_contact_group_memberships_id'), table_name='contact_group_memberships')
    op.drop_index('idx_contact_group_membership_group', table_name='contact_group_memberships')
    op.drop_index('idx_contact_group_membership_created_at', table_name='contact_group_memberships')
    op.drop_index('idx_contact_group_membership_contact_group', table_name='contact_group_memberships')
    op.drop_index('idx_contact_group_membership_contact', table_name='contact_group_memberships')
    op.drop_table('contact_group_memberships')
    op.drop_index(op.f('ix_comments_id'), table_name='comments')
    op.drop_index('idx_comment_parent_id', table_name='comments')
    op.drop_index('idx_comment_is_deleted', table_name='comments')
    op.drop_index('idx_comment_event_id', table_name='comments')
    op.drop_index('idx_comment_event_created', table_name='comments')
    op.drop_index('idx_comment_created_at', table_name='comments')
    op.drop_index('idx_comment_author_id', table_name='comments')
    op.drop_index('idx_comment_author_created', table_name='comments')
    op.drop_table('comments')
    op.drop_index(op.f('ix_biometric_tokens_id'), table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_user_type', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_user_id', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_user_expires', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_used', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_type', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_token_used', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_token', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_expires_at', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_device_id', table_name='biometric_tokens')
    op.drop_index('idx_biometric_token_created_at', table_name='biometric_tokens')
    op.drop_table('biometric_tokens')
    op.drop_index(op.f('ix_biometric_auth_attempts_id'), table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_successful', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_ip_created', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_ip', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_created_at', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_auth_success', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_auth_id', table_name='biometric_auth_attempts')
    op.drop_index('idx_biometric_attempt_auth_created', table_name='biometric_auth_attempts')
    op.drop_table('biometric_auth_attempts')
    op.drop_index(op.f('ix_automation_rules_id'), table_name='automation_rules')
    op.drop_table('automation_rules')
    op.drop_index(op.f('ix_ai_chat_sessions_id'), table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_user_status', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_user_id', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_user_created', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_updated_at', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_status_created', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_status', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_session_id', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_created_event_id', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_created_at', table_name='ai_chat_sessions')
    op.drop_index('idx_ai_chat_session_completed_at', table_name='ai_chat_sessions')
    op.drop_table('ai_chat_sessions')
    op.drop_index(op.f('ix_vendors_id'), table_name='vendors')
    op.drop_index('idx_vendor_stripe_account_id', table_name='vendors')
    op.drop_index('idx_vendor_status', table_name='vendors')
    op.drop_index('idx_vendor_location', table_name='vendors')
    op.drop_index('idx_vendor_is_featured', table_name='vendors')
    op.drop_index('idx_vendor_email', table_name='vendors')
    op.drop_index('idx_vendor_city_category', table_name='vendors')
    op.drop_index('idx_vendor_city', table_name='vendors')
    op.drop_index('idx_vendor_category_status', table_name='vendors')
    op.drop_index('idx_vendor_category', table_name='vendors')
    op.drop_index('idx_vendor_average_rating', table_name='vendors')
    op.drop_table('vendors')
    op.drop_index(op.f('ix_user_subscriptions_id'), table_name='user_subscriptions')
    op.drop_index('idx_user_subscription', table_name='user_subscriptions')
    op.drop_index('idx_user_status', table_name='user_subscriptions')
    op.drop_index('idx_subscription_status', table_name='user_subscriptions')
    op.drop_index('idx_subscription_period', table_name='user_subscriptions')
    op.drop_index('idx_subscription_dates', table_name='user_subscriptions')
    op.drop_index('idx_stripe_subscription', table_name='user_subscriptions')
    op.drop_index('idx_stripe_customer', table_name='user_subscriptions')
    op.drop_table('user_subscriptions')
    op.drop_index(op.f('ix_user_sessions_id'), table_name='user_sessions')
    op.drop_index('idx_usersession_user_id', table_name='user_sessions')
    op.drop_index('idx_usersession_user_expires', table_name='user_sessions')
    op.drop_index('idx_usersession_user_active', table_name='user_sessions')
    op.drop_index('idx_usersession_session_token', table_name='user_sessions')
    op.drop_index('idx_usersession_refresh_token', table_name='user_sessions')
    op.drop_index('idx_usersession_is_active', table_name='user_sessions')
    op.drop_index('idx_usersession_ip_address', table_name='user_sessions')
    op.drop_index('idx_usersession_expires_at', table_name='user_sessions')
    op.drop_index('idx_usersession_created_at', table_name='user_sessions')
    op.drop_index('idx_usersession_active_expires', table_name='user_sessions')
    op.drop_table('user_sessions')
    op.drop_index(op.f('ix_user_profiles_id'), table_name='user_profiles')
    op.drop_index('idx_userprofile_user_id', table_name='user_profiles')
    op.drop_index('idx_userprofile_style_budget', table_name='user_profiles')
    op.drop_index('idx_userprofile_planning_style', table_name='user_profiles')
    op.drop_index('idx_userprofile_occupation_company', table_name='user_profiles')
    op.drop_index('idx_userprofile_occupation', table_name='user_profiles')
    op.drop_index('idx_userprofile_created_at', table_name='user_profiles')
    op.drop_index('idx_userprofile_company', table_name='user_profiles')
    op.drop_index('idx_userprofile_budget_range', table_name='user_profiles')
    op.drop_table('user_profiles')
    op.drop_table('user_friends')
    op.drop_index(op.f('ix_user_contacts_id'), table_name='user_contacts')
    op.drop_index('idx_user_contact_user_source', table_name='user_contacts')
    op.drop_index('idx_user_contact_user_name', table_name='user_contacts')
    op.drop_index('idx_user_contact_user_id', table_name='user_contacts')
    op.drop_index('idx_user_contact_user_favorite', table_name='user_contacts')
    op.drop_index('idx_user_contact_source', table_name='user_contacts')
    op.drop_index('idx_user_contact_phone_user', table_name='user_contacts')
    op.drop_index('idx_user_contact_phone', table_name='user_contacts')
    op.drop_index('idx_user_contact_name', table_name='user_contacts')
    op.drop_index('idx_user_contact_favorite', table_name='user_contacts')
    op.drop_index('idx_user_contact_email_user', table_name='user_contacts')
    op.drop_index('idx_user_contact_email', table_name='user_contacts')
    op.drop_index('idx_user_contact_created_at', table_name='user_contacts')
    op.drop_table('user_contacts')
    op.drop_index(op.f('ix_usage_limits_id'), table_name='usage_limits')
    op.drop_index('idx_usage_user_period', table_name='usage_limits')
    op.drop_index('idx_usage_user', table_name='usage_limits')
    op.drop_index('idx_usage_period', table_name='usage_limits')
    op.drop_index('idx_usage_exceeded', table_name='usage_limits')
    op.drop_table('usage_limits')
    op.drop_index(op.f('ix_timeline_templates_id'), table_name='timeline_templates')
    op.drop_index('idx_timeline_template_verified_public', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_usage_public', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_usage_count', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_updated_at', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_public_type', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_is_verified', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_is_public', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_event_type', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_creator_type', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_creator_id', table_name='timeline_templates')
    op.drop_index('idx_timeline_template_created_at', table_name='timeline_templates')
    op.drop_table('timeline_templates')
    op.drop_index(op.f('ix_reminder_templates_id'), table_name='reminder_templates')
    op.drop_table('reminder_templates')
    op.drop_index(op.f('ix_notification_preferences_id'), table_name='notification_preferences')
    op.drop_index('idx_notificationpref_user_type', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_user_push', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_user_id', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_user_email', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_sms_enabled', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_push_enabled', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_notification_type', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_in_app_enabled', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_email_enabled', table_name='notification_preferences')
    op.drop_index('idx_notificationpref_created_at', table_name='notification_preferences')
    op.drop_table('notification_preferences')
    op.drop_index(op.f('ix_notification_devices_id'), table_name='notification_devices')
    op.drop_index('idx_userdevice_user_id', table_name='notification_devices')
    op.drop_index('idx_userdevice_user_active', table_name='notification_devices')
    op.drop_index('idx_userdevice_platform', table_name='notification_devices')
    op.drop_index('idx_userdevice_last_used', table_name='notification_devices')
    op.drop_index('idx_userdevice_is_active', table_name='notification_devices')
    op.drop_index('idx_userdevice_device_token', table_name='notification_devices')
    op.drop_index('idx_userdevice_created_at', table_name='notification_devices')
    op.drop_table('notification_devices')
    op.drop_index(op.f('ix_invite_links_user_id'), table_name='invite_links')
    op.drop_index(op.f('ix_invite_links_link_id'), table_name='invite_links')
    op.drop_index(op.f('ix_invite_links_invite_type'), table_name='invite_links')
    op.drop_index(op.f('ix_invite_links_id'), table_name='invite_links')
    op.drop_index('idx_invite_links_user_type', table_name='invite_links')
    op.drop_index('idx_invite_links_user_id', table_name='invite_links')
    op.drop_index('idx_invite_links_type_active', table_name='invite_links')
    op.drop_index('idx_invite_links_type', table_name='invite_links')
    op.drop_index('idx_invite_links_link_id', table_name='invite_links')
    op.drop_index('idx_invite_links_expires_at', table_name='invite_links')
    op.drop_index('idx_invite_links_deleted', table_name='invite_links')
    op.drop_index('idx_invite_links_current_uses', table_name='invite_links')
    op.drop_index('idx_invite_links_active_expires', table_name='invite_links')
    op.drop_index('idx_invite_links_active', table_name='invite_links')
    op.drop_table('invite_links')
    op.drop_index(op.f('ix_invite_codes_user_id'), table_name='invite_codes')
    op.drop_index(op.f('ix_invite_codes_invite_type'), table_name='invite_codes')
    op.drop_index(op.f('ix_invite_codes_id'), table_name='invite_codes')
    op.drop_index(op.f('ix_invite_codes_code'), table_name='invite_codes')
    op.drop_index('idx_invite_codes_user_type', table_name='invite_codes')
    op.drop_index('idx_invite_codes_user_id', table_name='invite_codes')
    op.drop_index('idx_invite_codes_used_at', table_name='invite_codes')
    op.drop_index('idx_invite_codes_type_active', table_name='invite_codes')
    op.drop_index('idx_invite_codes_type', table_name='invite_codes')
    op.drop_index('idx_invite_codes_expires_at', table_name='invite_codes')
    op.drop_index('idx_invite_codes_deleted', table_name='invite_codes')
    op.drop_index('idx_invite_codes_code', table_name='invite_codes')
    op.drop_index('idx_invite_codes_active_expires', table_name='invite_codes')
    op.drop_index('idx_invite_codes_active', table_name='invite_codes')
    op.drop_table('invite_codes')
    op.drop_index(op.f('ix_events_id'), table_name='events')
    op.drop_index('idx_event_venue_city', table_name='events')
    op.drop_index('idx_event_type_status', table_name='events')
    op.drop_index('idx_event_type', table_name='events')
    op.drop_index('idx_event_status', table_name='events')
    op.drop_index('idx_event_start_datetime', table_name='events')
    op.drop_index('idx_event_location', table_name='events')
    op.drop_index('idx_event_is_public', table_name='events')
    op.drop_index('idx_event_is_deleted', table_name='events')
    op.drop_index('idx_event_is_active', table_name='events')
    op.drop_index('idx_event_date_status', table_name='events')
    op.drop_index('idx_event_creator_status', table_name='events')
    op.drop_index('idx_event_creator_id', table_name='events')
    op.drop_index('idx_event_created_at', table_name='events')
    op.drop_index('idx_event_city_type', table_name='events')
    op.drop_table('events')
    op.drop_index(op.f('ix_contact_groups_id'), table_name='contact_groups')
    op.drop_index('idx_contact_group_user_name', table_name='contact_groups')
    op.drop_index('idx_contact_group_user_id', table_name='contact_groups')
    op.drop_index('idx_contact_group_user_default', table_name='contact_groups')
    op.drop_index('idx_contact_group_name', table_name='contact_groups')
    op.drop_index('idx_contact_group_default', table_name='contact_groups')
    op.drop_index('idx_contact_group_created_at', table_name='contact_groups')
    op.drop_table('contact_groups')
    op.drop_index(op.f('ix_biometric_devices_id'), table_name='biometric_devices')
    op.drop_index('idx_user_device_user_type', table_name='biometric_devices')
    op.drop_index('idx_user_device_user_trusted', table_name='biometric_devices')
    op.drop_index('idx_user_device_user_id', table_name='biometric_devices')
    op.drop_index('idx_user_device_user_active', table_name='biometric_devices')
    op.drop_index('idx_user_device_type', table_name='biometric_devices')
    op.drop_index('idx_user_device_trusted', table_name='biometric_devices')
    op.drop_index('idx_user_device_last_used', table_name='biometric_devices')
    op.drop_index('idx_user_device_device_user', table_name='biometric_devices')
    op.drop_index('idx_user_device_device_id', table_name='biometric_devices')
    op.drop_index('idx_user_device_created_at', table_name='biometric_devices')
    op.drop_index('idx_user_device_active', table_name='biometric_devices')
    op.drop_table('biometric_devices')
    op.drop_index(op.f('ix_biometric_auths_id'), table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_user_type', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_user_status', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_user_primary', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_user_id', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_user_device', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_type_status', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_type', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_status', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_primary', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_last_used', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_expires_at', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_device_type', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_device_id', table_name='biometric_auths')
    op.drop_index('idx_biometric_auth_created_at', table_name='biometric_auths')
    op.drop_table('biometric_auths')
    op.drop_index(op.f('ix_users_username'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email_verification_token'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_index('idx_user_username', table_name='users')
    op.drop_index('idx_user_updated_at', table_name='users')
    op.drop_index('idx_user_timezone', table_name='users')
    op.drop_index('idx_user_stripe_customer_id', table_name='users')
    op.drop_index('idx_user_signup_method', table_name='users')
    op.drop_index('idx_user_otp_expires_at', table_name='users')
    op.drop_index('idx_user_is_verified', table_name='users')
    op.drop_index('idx_user_is_deleted', table_name='users')
    op.drop_index('idx_user_is_active', table_name='users')
    op.drop_index('idx_user_email', table_name='users')
    op.drop_index('idx_user_created_at', table_name='users')
    op.drop_index('idx_user_created_active', table_name='users')
    op.drop_index('idx_user_country', table_name='users')
    op.drop_index('idx_user_city_country', table_name='users')
    op.drop_index('idx_user_city', table_name='users')
    op.drop_index('idx_user_active_verified', table_name='users')
    op.drop_table('users')
    op.drop_index(op.f('ix_subscription_plans_id'), table_name='subscription_plans')
    op.drop_index('idx_stripe_price_yearly', table_name='subscription_plans')
    op.drop_index('idx_stripe_price_monthly', table_name='subscription_plans')
    op.drop_index('idx_plan_type', table_name='subscription_plans')
    op.drop_index('idx_plan_active', table_name='subscription_plans')
    op.drop_table('subscription_plans')
    op.drop_index(op.f('ix_stripe_event_logs_id'), table_name='stripe_event_logs')
    op.drop_index(op.f('ix_stripe_event_logs_event_id'), table_name='stripe_event_logs')
    op.drop_index('idx_stripe_processing_status', table_name='stripe_event_logs')
    op.drop_index('idx_stripe_processed_at', table_name='stripe_event_logs')
    op.drop_index('idx_stripe_event_type', table_name='stripe_event_logs')
    op.drop_index('idx_stripe_event_id', table_name='stripe_event_logs')
    op.drop_table('stripe_event_logs')
    # ### end Alembic commands ###
